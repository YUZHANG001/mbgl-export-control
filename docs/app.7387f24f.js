parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"mg8D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{onAdd(){this.container=document.createElement("div"),this.container.className="mapboxgl-ctrl";const t=document.createElement("img");return t.src="https://tilecloud.github.io/logo/tilecloud-map-icon.png",t.style.maxWidth="100%",t.style.display="block",t.style.cursor="pointer",this.container.appendChild(t),t.addEventListener("click",()=>{window.location.href="https://tilecloud.io/"}),this.container}onRemove(){this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"bottom-left"}}exports.default=t;
},{}],"7bbP":[function(require,module,exports) {
"use strict";const t={},e=function(e){t.url=e.url};e.prototype.onAdd=(()=>{this.container=document.createElement("div"),this.container.className="mapboxgl-ctrl";return this.container.innerHTML='<a><img style="position: absolute; top: -149px; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png" alt="Fork me on GitHub"></a>',this.container.querySelector("a").href=t.url,document.querySelector(".mapboxgl-ctrl-top-left").style.top="149px",this.container}),e.prototype.onRemove=(()=>{this.container.parentNode.removeChild(this.container)}),e.prototype.getDefaultPosition=(()=>"top-left"),module.exports=e;
},{}],"pFpI":[function(require,module,exports) {
var o=function(o,e){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},t={on:function(o,e,t){if(void 0===n[o])throw new Error("Invalid event type: "+o);n[o].push({selector:e,fn:t})},render:function(o){e.store.featureChanged(o)}},u=function(o,u){for(var c=n[o],r=c.length;r--;){var s=c[r];if(s.selector(u)){s.fn.call(t,u),e.store.render(),e.ui.updateMapClasses();break}}};return o.start.call(t),{render:o.render,stop:function(){o.stop&&o.stop()},trash:function(){o.trash&&(o.trash(),e.store.render())},combineFeatures:function(){o.combineFeatures&&o.combineFeatures()},uncombineFeatures:function(){o.uncombineFeatures&&o.uncombineFeatures()},drag:function(o){u("drag",o)},click:function(o){u("click",o)},mousemove:function(o){u("mousemove",o)},mousedown:function(o){u("mousedown",o)},mouseup:function(o){u("mouseup",o)},mouseout:function(o){u("mouseout",o)},keydown:function(o){u("keydown",o)},keyup:function(o){u("keyup",o)},touchstart:function(o){u("touchstart",o)},touchmove:function(o){u("touchmove",o)},touchend:function(o){u("touchend",o)},tap:function(o){u("tap",o)}}};module.exports=o;
},{}],"3JpV":[function(require,module,exports) {
module.exports.RADIUS=6378137,module.exports.FLATTENING=1/298.257223563,module.exports.POLAR_RADIUS=6356752.3142;
},{}],"eBm2":[function(require,module,exports) {
var e=require("wgs84");function t(e){var n,o=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)o+=r(e.coordinates[n]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)o+=t(e.geometries[n]);return o}}function r(e){var t=0;if(e&&e.length>0){t+=Math.abs(n(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(n(e[r]))}return t}function n(t){var r,n,i,a,s,u,c=0,g=t.length;if(g>2){for(u=0;u<g;u++)u===g-2?(i=g-2,a=g-1,s=0):u===g-1?(i=g-1,a=0,s=1):(i=u,a=u+1,s=u+2),r=t[i],n=t[a],c+=(o(t[s][0])-o(r[0]))*Math.sin(o(n[1]));c=c*e.RADIUS*e.RADIUS/2}return c}function o(e){return e*Math.PI/180}module.exports.geometry=t,module.exports.ring=n;
},{"wgs84":"3JpV"}],"CUIt":[function(require,module,exports) {
module.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270};
},{}],"lsCf":[function(require,module,exports) {
var e=require("@mapbox/geojson-area"),r=require("../constants"),o={Point:0,LineString:1,Polygon:2};function t(e,t){var n=o[e.geometry.type]-o[t.geometry.type];return 0===n&&e.geometry.type===r.geojsonTypes.POLYGON?e.area-t.area:n}function n(o){return o.map(function(o){return o.geometry.type===r.geojsonTypes.POLYGON&&(o.area=e.geometry({type:r.geojsonTypes.FEATURE,property:{},geometry:o.geometry})),o}).sort(t).map(function(e){return delete e.area,e})}module.exports=n;
},{"@mapbox/geojson-area":"eBm2","../constants":"CUIt"}],"Hr/r":[function(require,module,exports) {
function n(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[n.point.x-o,n.point.y-o],[n.point.x+o,n.point.y+o]]}module.exports=n;
},{}],"Y+E8":[function(require,module,exports) {
function t(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(var s=0,i=t.length;s<i;s++)this.add(t[s]),void 0!==t[s]&&("string"==typeof t[s]?this._items[t[s]]=s:this._nums[t[s]]=s)}t.prototype.add=function(t){return this.has(t)?this:(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length,this)},t.prototype.delete=function(t){return!1===this.has(t)?this:(this._length--,delete this._items[t],delete this._nums[t],this)},t.prototype.has=function(t){return("string"==typeof t||"number"==typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},t.prototype.values=function(){var t=this,s=[];return Object.keys(this._items).forEach(function(i){s.push({k:i,v:t._items[i]})}),Object.keys(this._nums).forEach(function(i){s.push({k:JSON.parse(i),v:t._nums[i]})}),s.sort(function(t,s){return t.v-s.v}).map(function(t){return t.k})},t.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},module.exports=t;
},{}],"yhG3":[function(require,module,exports) {
var e=require("./sort_features"),r=require("./map_event_to_bounding_box"),t=require("../constants"),n=require("./string_set"),u=[t.meta.FEATURE,t.meta.MIDPOINT,t.meta.VERTEX];function o(e,r,t){return s(e,r,t,t.options.clickBuffer)}function i(e,r,t){return s(e,r,t,t.options.touchBuffer)}function s(t,o,i,s){if(null===i.map)return[];var a=t?r(t,s):o,f={};i.options.styles&&(f.layers=i.options.styles.map(function(e){return e.id}));var c=i.map.queryRenderedFeatures(a,f).filter(function(e){return-1!==u.indexOf(e.properties.meta)}),p=new n,d=[];return c.forEach(function(e){var r=e.properties.id;p.has(r)||(p.add(r),d.push(e))}),e(d)}module.exports={click:o,touch:i};
},{"./sort_features":"lsCf","./map_event_to_bounding_box":"Hr/r","../constants":"CUIt","./string_set":"Y+E8"}],"6pI8":[function(require,module,exports) {
var e=require("./features_at"),r=require("../constants");module.exports=function(s,u){var t=e.click(s,null,u),a={mouse:r.cursors.NONE};return t[0]&&(a.mouse=t[0].properties.active===r.activeStates.ACTIVE?r.cursors.MOVE:r.cursors.POINTER,a.feature=t[0].properties.meta),-1!==u.events.currentModeName().indexOf("draw")&&(a.mouse=r.cursors.ADD),u.ui.queueMapClasses(a),u.ui.updateMapClasses(),t[0]};
},{"./features_at":"yhG3","../constants":"CUIt"}],"L8H4":[function(require,module,exports) {
module.exports=function(r,t){var e=r.x-t.x,n=r.y-t.y;return Math.sqrt(e*e+n*n)};
},{}],"048B":[function(require,module,exports) {
var e=require("./euclidean_distance"),n=4,i=12,t=500;module.exports=function(r,l){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!=o.fineTolerance?o.fineTolerance:n,u=null!=o.grossTolerance?o.grossTolerance:i,c=null!=o.interval?o.interval:t;r.point=r.point||l.point,r.time=r.time||l.time;var m=e(r.point,l.point);return m<a||m<u&&l.time-r.time<c};
},{"./euclidean_distance":"L8H4"}],"LVcg":[function(require,module,exports) {
var e=require("./euclidean_distance"),t=25,i=250;module.exports=function(n,l){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null!=o.tolerance?o.tolerance:t,a=null!=o.interval?o.interval:i;return n.point=n.point||l.point,n.time=n.time||l.time,e(n.point,l.point)<r&&l.time-n.time<a};
},{"./euclidean_distance":"L8H4"}],"RLN0":[function(require,module,exports) {
var t=module.exports=function(r,o){if(o||(o=16),void 0===r&&(r=128),r<=0)return"0";for(var a=Math.log(Math.pow(2,r))/Math.log(o),n=2;a===1/0;n*=2)a=Math.log(Math.pow(2,r/n))/Math.log(o)*n;var h=a-Math.floor(a),e="";for(n=0;n<Math.floor(a);n++){e=Math.floor(Math.random()*o).toString(o)+e}if(h){var i=Math.pow(o,h);e=Math.floor(Math.random()*i).toString(o)+e}var f=parseInt(e,o);return f!==1/0&&f>=Math.pow(2,r)?t(r,o):e};t.rack=function(r,o,a){var n=function(n){var e=0;do{if(e++>10){if(!a)throw new Error("too many ID collisions, use more bits");r+=a}var i=t(r,o)}while(Object.hasOwnProperty.call(h,i));return h[i]=n,i},h=n.hats={};return n.get=function(t){return n.hats[t]},n.set=function(t,r){return n.hats[t]=r,n},n.bits=r||128,n.base=o||16,n};
},{}],"MYNE":[function(require,module,exports) {
var t=require("hat"),e=require("../constants"),o=function(e,o){this.ctx=e,this.properties=o.properties||{},this.coordinates=o.geometry.coordinates,this.id=o.id||t(),this.type=o.geometry.type};o.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},o.prototype.incomingCoords=function(t){this.setCoordinates(t)},o.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},o.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},o.prototype.setProperty=function(t,e){this.properties[t]=e},o.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:e.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},o.prototype.internal=function(t){var o={id:this.id,meta:e.meta.FEATURE,"meta:type":this.type,active:e.activeStates.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(var i in this.properties)o["user_"+i]=this.properties[i];return{type:e.geojsonTypes.FEATURE,properties:o,geometry:{coordinates:this.getCoordinates(),type:this.type}}},module.exports=o;
},{"hat":"RLN0","../constants":"CUIt"}],"xHxC":[function(require,module,exports) {
var t=require("./feature"),e=function(e,o){t.call(this,e,o)};e.prototype=Object.create(t.prototype),e.prototype.isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},e.prototype.updateCoordinate=function(t,e,o){3===arguments.length?this.coordinates=[e,o]:this.coordinates=[t,e],this.changed()},e.prototype.getCoordinate=function(){return this.getCoordinates()},module.exports=e;
},{"./feature":"MYNE"}],"ZGhc":[function(require,module,exports) {
var t=require("./feature"),e=function(e,o){t.call(this,e,o)};e.prototype=Object.create(t.prototype),e.prototype.isValid=function(){return this.coordinates.length>1},e.prototype.addCoordinate=function(t,e,o){this.changed();var r=parseInt(t,10);this.coordinates.splice(r,0,[e,o])},e.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},e.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},e.prototype.updateCoordinate=function(t,e,o){var r=parseInt(t,10);this.coordinates[r]=[e,o],this.changed()},module.exports=e;
},{"./feature":"MYNE"}],"CqQB":[function(require,module,exports) {
var t=require("./feature"),o=function(o,n){t.call(this,o,n),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};o.prototype=Object.create(t.prototype),o.prototype.isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return t.length>2})},o.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},o.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},o.prototype.addCoordinate=function(t,o,n){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[e[0]].splice(e[1],0,[o,n])},o.prototype.removeCoordinate=function(t){this.changed();var o=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[o[0]];n&&(n.splice(o[1],1),n.length<3&&this.coordinates.splice(o[0],1))},o.prototype.getCoordinate=function(t){var o=t.split(".").map(function(t){return parseInt(t,10)}),n=this.coordinates[o[0]];return JSON.parse(JSON.stringify(n[o[1]]))},o.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},o.prototype.updateCoordinate=function(t,o,n){this.changed();var e=t.split("."),i=parseInt(e[0],10),r=parseInt(e[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][r]=[o,n]},module.exports=o;
},{"./feature":"MYNE"}],"XckI":[function(require,module,exports) {
var t=require("./feature"),e=require("../constants"),o=require("hat"),r={MultiPoint:require("./point"),MultiLineString:require("./line_string"),MultiPolygon:require("./polygon")},i=function(t,e,o,r,i){var n=o.split("."),s=parseInt(n[0],10),a=n[1]?n.slice(1).join("."):null;return t[s][e](a,r,i)},n=function(e,o){if(t.call(this,e,o),delete this.coordinates,this.model=r[o.geometry.type],void 0===this.model)throw new TypeError(o.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(o.geometry.coordinates)};n.prototype=Object.create(t.prototype),n.prototype._coordinatesToFeatures=function(t){var r=this,i=this.model.bind(this);return t.map(function(t){return new i(r.ctx,{id:o(),type:e.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:r.type.replace("Multi","")}})})},n.prototype.isValid=function(){return this.features.every(function(t){return t.isValid()})},n.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},n.prototype.getCoordinate=function(t){return i(this.features,"getCoordinate",t)},n.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(t){return t.type===e.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates})))},n.prototype.updateCoordinate=function(t,e,o){i(this.features,"updateCoordinate",t,e,o),this.changed()},n.prototype.addCoordinate=function(t,e,o){i(this.features,"addCoordinate",t,e,o),this.changed()},n.prototype.removeCoordinate=function(t){i(this.features,"removeCoordinate",t),this.changed()},n.prototype.getFeatures=function(){return this.features},module.exports=n;
},{"./feature":"MYNE","../constants":"CUIt","hat":"RLN0","./point":"xHxC","./line_string":"ZGhc","./polygon":"CqQB"}],"kI/0":[function(require,module,exports) {
var e=require("../constants"),t=require("../lib/features_at"),r=require("../feature_types/point"),o=require("../feature_types/line_string"),n=require("../feature_types/polygon"),s=require("../feature_types/multi_feature"),i=module.exports=function(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e};i.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},i.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce(function(e,r){return void 0===e[r.feature_id]&&(e[r.feature_id]=!0,t._ctx.store.get(r.feature_id).changed()),e},{})},i.prototype.getSelected=function(){return this._ctx.store.getSelected()},i.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},i.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},i.prototype.getFeature=function(e){return this._ctx.store.get(e)},i.prototype.select=function(e){return this._ctx.store.select(e)},i.prototype.deselect=function(e){return this._ctx.store.deselect(e)},i.prototype.deleteFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(e,t)},i.prototype.addFeature=function(e){return this._ctx.store.add(e)},i.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},i.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},i.prototype.setActionableState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},i.prototype.changeMode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(e,t,r)},i.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},i.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},i.prototype.featuresAt=function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==o&&"touch"!==o)throw new Error("invalid buffer type");return t[o](e,r,this._ctx)},i.prototype.newFeature=function(t){var i=t.geometry.type;return i===e.geojsonTypes.POINT?new r(this._ctx,t):i===e.geojsonTypes.LINE_STRING?new o(this._ctx,t):i===e.geojsonTypes.POLYGON?new n(this._ctx,t):new s(this._ctx,t)},i.prototype.isInstanceOf=function(t,i){if(t===e.geojsonTypes.POINT)return i instanceof r;if(t===e.geojsonTypes.LINE_STRING)return i instanceof o;if(t===e.geojsonTypes.POLYGON)return i instanceof n;if("MultiFeature"===t)return i instanceof s;throw new Error("Unknown feature class: "+t)},i.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};
},{"../constants":"CUIt","../lib/features_at":"yhG3","../feature_types/point":"xHxC","../feature_types/line_string":"ZGhc","../feature_types/polygon":"CqQB","../feature_types/multi_feature":"XckI"}],"vMkN":[function(require,module,exports) {
var o=module.exports=require("./mode_interface_accessors");o.prototype.onSetup=function(){},o.prototype.onDrag=function(){},o.prototype.onClick=function(){},o.prototype.onMouseMove=function(){},o.prototype.onMouseDown=function(){},o.prototype.onMouseUp=function(){},o.prototype.onMouseOut=function(){},o.prototype.onKeyUp=function(){},o.prototype.onKeyDown=function(){},o.prototype.onTouchStart=function(){},o.prototype.onTouchMove=function(){},o.prototype.onTouchEnd=function(){},o.prototype.onTap=function(){},o.prototype.onStop=function(){},o.prototype.onTrash=function(){},o.prototype.onCombineFeature=function(){},o.prototype.onUncombineFeature=function(){},o.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};
},{"./mode_interface_accessors":"kI/0"}],"MK+e":[function(require,module,exports) {
var n=require("./mode_interface");module.exports=function(o){var t=Object.keys(o);return function(u){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},i=t.reduce(function(n,t){return n[t]=o[t],n},new n(u));function c(n){return function(o){i[n](r,o)}}return{start:function(){r=i.onSetup(e),this.on("drag",function(){return!0},c("onDrag")),this.on("click",function(){return!0},c("onClick")),this.on("mousemove",function(){return!0},c("onMouseMove")),this.on("mousedown",function(){return!0},c("onMouseDown")),this.on("mouseup",function(){return!0},c("onMouseUp")),this.on("mouseout",function(){return!0},c("onMouseOut")),this.on("keyup",function(){return!0},c("onKeyUp")),this.on("keydown",function(){return!0},c("onKeyDown")),this.on("touchstart",function(){return!0},c("onTouchStart")),this.on("touchmove",function(){return!0},c("onTouchMove")),this.on("touchend",function(){return!0},c("onTouchEnd")),this.on("tap",function(){return!0},c("onTap"))},stop:function(){i.onStop(r)},trash:function(){i.onTrash(r)},combineFeatures:function(){i.onCombineFeatures(r)},uncombineFeatures:function(){i.onUncombineFeatures(r)},render:function(n,o){i.toDisplayFeatures(r,n,o)}}}};
},{"./mode_interface":"vMkN"}],"1arB":[function(require,module,exports) {
var e=require("./lib/mode_handler"),o=require("./lib/get_features_and_set_cursor"),t=require("./lib/features_at"),n=require("./lib/is_click"),r=require("./lib/is_tap"),u=require("./constants"),i=require("./modes/object_to_mode");module.exports=function(a){var s=Object.keys(a.options.modes).reduce(function(e,o){return e[o]=i(a.options.modes[o]),e},{}),c={},m={},d={},f=null,p=null;d.drag=function(e,o){o({point:e.point,time:(new Date).getTime()})?(a.ui.queueMapClasses({mouse:u.cursors.DRAG}),p.drag(e)):e.originalEvent.stopPropagation()},d.mousedrag=function(e){d.drag(e,function(e){return!n(c,e)})},d.touchdrag=function(e){d.drag(e,function(e){return!r(m,e)})},d.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return d.mousedrag(e);var t=o(e,a);e.featureTarget=t,p.mousemove(e)},d.mousedown=function(e){c={time:(new Date).getTime(),point:e.point};var t=o(e,a);e.featureTarget=t,p.mousedown(e)},d.mouseup=function(e){var t=o(e,a);e.featureTarget=t,n(c,{point:e.point,time:(new Date).getTime()})?p.click(e):p.mouseup(e)},d.mouseout=function(e){p.mouseout(e)},d.touchstart=function(e){if(e.originalEvent.preventDefault(),a.options.touchEnabled){m={time:(new Date).getTime(),point:e.point};var o=t.touch(e,null,a)[0];e.featureTarget=o,p.touchstart(e)}},d.touchmove=function(e){if(e.originalEvent.preventDefault(),a.options.touchEnabled)return p.touchmove(e),d.touchdrag(e)},d.touchend=function(e){if(e.originalEvent.preventDefault(),a.options.touchEnabled){var o=t.touch(e,null,a)[0];e.featureTarget=o,r(m,{time:(new Date).getTime(),point:e.point})?p.tap(e):p.touchend(e)}};var v=function(e){return!(8===e||46===e||e>=48&&e<=57)};function l(o,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.stop();var r=s[o];if(void 0===r)throw new Error(o+" is not valid");f=o;var i=r(a,t);p=e(i,a),n.silent||a.map.fire(u.events.MODE_CHANGE,{mode:o}),a.store.setDirty(),a.store.render()}d.keydown=function(e){"mapboxgl-canvas"===(e.srcElement||e.target).classList[0]&&(8!==e.keyCode&&46!==e.keyCode||!a.options.controls.trash?v(e.keyCode)?p.keydown(e):49===e.keyCode&&a.options.controls.point?l(u.modes.DRAW_POINT):50===e.keyCode&&a.options.controls.line_string?l(u.modes.DRAW_LINE_STRING):51===e.keyCode&&a.options.controls.polygon&&l(u.modes.DRAW_POLYGON):(e.preventDefault(),p.trash()))},d.keyup=function(e){v(e.keyCode)&&p.keyup(e)},d.zoomend=function(){a.store.changeZoom()},d.data=function(e){if("style"===e.dataType){var o=a.setup,t=a.map,n=a.options,r=a.store;n.styles.some(function(e){return t.getLayer(e.id)})||(o.addLayers(),r.setDirty(),r.render())}};var h={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){f=a.options.defaultMode,p=e(s[f](a),a)},changeMode:l,actionable:function(e){var o=!1;Object.keys(e).forEach(function(t){if(void 0===h[t])throw new Error("Invalid action type");h[t]!==e[t]&&(o=!0),h[t]=e[t]}),o&&a.map.fire(u.events.ACTIONABLE,{actions:h})},currentModeName:function(){return f},currentModeRender:function(e,o){return p.render(e,o)},fire:function(e,o){d[e]&&d[e](o)},addEventListeners:function(){a.map.on("mousemove",d.mousemove),a.map.on("mousedown",d.mousedown),a.map.on("mouseup",d.mouseup),a.map.on("data",d.data),a.map.on("touchmove",d.touchmove),a.map.on("touchstart",d.touchstart),a.map.on("touchend",d.touchend),a.container.addEventListener("mouseout",d.mouseout),a.options.keybindings&&(a.container.addEventListener("keydown",d.keydown),a.container.addEventListener("keyup",d.keyup))},removeEventListeners:function(){a.map.off("mousemove",d.mousemove),a.map.off("mousedown",d.mousedown),a.map.off("mouseup",d.mouseup),a.map.off("data",d.data),a.map.off("touchmove",d.touchmove),a.map.off("touchstart",d.touchstart),a.map.off("touchend",d.touchend),a.container.removeEventListener("mouseout",d.mouseout),a.options.keybindings&&(a.container.removeEventListener("keydown",d.keydown),a.container.removeEventListener("keyup",d.keyup))},trash:function(e){p.trash(e)},combineFeatures:function(){p.combineFeatures()},uncombineFeatures:function(){p.uncombineFeatures()},getMode:function(){return f}}};
},{"./lib/mode_handler":"pFpI","./lib/get_features_and_set_cursor":"6pI8","./lib/features_at":"yhG3","./lib/is_click":"048B","./lib/is_tap":"LVcg","./constants":"CUIt","./modes/object_to_mode":"MK+e"}],"gbVE":[function(require,module,exports) {
function o(o,n,t){var i=void 0,u=void 0;function e(){i=!1,u&&(p.apply(t,u),u=!1)}function p(){i?u=arguments:(i=!0,o.apply(t,arguments),setTimeout(e,n))}return p}module.exports=o;
},{}],"d09x":[function(require,module,exports) {
function n(n){return[].concat(n).filter(function(n){return void 0!==n})}module.exports=n;
},{}],"W685":[function(require,module,exports) {
var e=require("./constants");module.exports=function(){var t=this;if(!(t.ctx.map&&void 0!==t.ctx.map.getSource(e.sources.HOT)))return a();var r=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:r});var o=[],s=[];t.isDirty?s=t.getAllIds():(o=t.getChangedIds().filter(function(e){return void 0!==t.get(e)}),s=t.sources.hot.filter(function(e){return e.properties.id&&-1===o.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)}).map(function(e){return e.properties.id})),t.sources.hot=[];var n=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter(function(e){var t=e.properties.id||e.properties.parent;return-1===o.indexOf(t)});var i=n!==t.sources.cold.length||s.length>0;function c(e,o){var s=t.get(e).internal(r);t.ctx.events.currentModeRender(s,function(e){t.sources[o].push(e)})}if(o.forEach(function(e){return c(e,"hot")}),s.forEach(function(e){return c(e,"cold")}),i&&t.ctx.map.getSource(e.sources.COLD).setData({type:e.geojsonTypes.FEATURE_COLLECTION,features:t.sources.cold}),t.ctx.map.getSource(e.sources.HOT).setData({type:e.geojsonTypes.FEATURE_COLLECTION,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(e.events.SELECTION_CHANGE,{features:t.getSelected().map(function(e){return e.toGeoJSON()}),points:t.getSelectedCoordinates().map(function(t){return{type:e.geojsonTypes.FEATURE,properties:{},geometry:{type:e.geojsonTypes.POINT,coordinates:t.coordinates}}})}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){var u=t._deletedFeaturesToEmit.map(function(e){return e.toGeoJSON()});t._deletedFeaturesToEmit=[],t.ctx.map.fire(e.events.DELETE,{features:u})}function a(){t.isDirty=!1,t.clearChangedIds()}a(),t.ctx.map.fire(e.events.RENDER,{})};
},{"./constants":"CUIt"}],"mi7Y":[function(require,module,exports) {
var e=require("./lib/throttle"),t=require("./lib/to_dense_array"),i=require("./lib/string_set"),r=require("./render"),n=require("./constants").interactions,s=module.exports=function(t){this._features={},this._featureIds=new i,this._selectedFeatureIds=new i,this._selectedCoordinates=[],this._changedFeatureIds=new i,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=e(r,16,this),this.isDirty=!1};function o(e){var t=this,i=this._selectedCoordinates.filter(function(e){return t._selectedFeatureIds.has(e.feature_id)});this._selectedCoordinates.length===i.length||e.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=i}s.prototype.createRenderBatch=function(){var e=this,t=this.render,i=0;return this.render=function(){i++},function(){e.render=t,i>0&&e.render()}},s.prototype.setDirty=function(){return this.isDirty=!0,this},s.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},s.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},s.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},s.prototype.getAllIds=function(){return this._featureIds.values()},s.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},s.prototype.delete=function(e){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e).forEach(function(e){i._featureIds.has(e)&&(i._featureIds.delete(e),i._selectedFeatureIds.delete(e),r.silent||-1===i._deletedFeaturesToEmit.indexOf(i._features[e])&&i._deletedFeaturesToEmit.push(i._features[e]),delete i._features[e],i.isDirty=!0)}),o.call(this,r),this},s.prototype.get=function(e){return this._features[e]},s.prototype.getAll=function(){var e=this;return Object.keys(this._features).map(function(t){return e._features[t]})},s.prototype.select=function(e){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e).forEach(function(e){i._selectedFeatureIds.has(e)||(i._selectedFeatureIds.add(e),i._changedFeatureIds.add(e),r.silent||(i._emitSelectionChange=!0))}),this},s.prototype.deselect=function(e){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e).forEach(function(e){i._selectedFeatureIds.has(e)&&(i._selectedFeatureIds.delete(e),i._changedFeatureIds.add(e),r.silent||(i._emitSelectionChange=!0))}),o.call(this,r),this},s.prototype.clearSelected=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},s.prototype.setSelected=function(e){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=t(e),this.deselect(this._selectedFeatureIds.values().filter(function(t){return-1===e.indexOf(t)}),{silent:r.silent}),this.select(e.filter(function(e){return!i._selectedFeatureIds.has(e)}),{silent:r.silent}),this},s.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},s.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},s.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},s.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map(function(t){return e.get(t)})},s.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map(function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}})},s.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},s.prototype.setFeatureProperty=function(e,t,i){this.get(e).setProperty(t,i),this.featureChanged(e)},s.prototype.storeMapConfig=function(){var e=this;n.forEach(function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())})},s.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach(function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()})},s.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};
},{"./lib/throttle":"gbVE","./lib/to_dense_array":"d09x","./lib/string_set":"Y+E8","./render":"W685","./constants":"CUIt"}],"K5Tb":[function(require,module,exports) {
module.exports=o;var r=Object.prototype.hasOwnProperty;function o(){for(var o={},t=0;t<arguments.length;t++){var e=arguments[t];for(var a in e)r.call(e,a)&&(o[a]=e[a])}return o}
},{}],"mgby":[function(require,module,exports) {
var e=require("xtend"),t=require("./constants"),n=["mode","feature","mouse"];module.exports=function(s){var a={},o=null,c={mode:null,feature:null,mouse:null},i={mode:null,feature:null,mouse:null};function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=document.createElement("button");return s.className=t.classes.CONTROL_BUTTON+" "+n.className,s.setAttribute("title",n.title),n.container.appendChild(s),s.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.target!==o?(u(e),n.onActivate()):r()},!0),s}function r(){o&&(o.classList.remove(t.classes.ACTIVE_BUTTON),o=null)}function u(e){r();var n=a[e];n&&n&&"trash"!==e&&(n.classList.add(t.classes.ACTIVE_BUTTON),o=n)}return{setActiveButton:u,queueMapClasses:function(t){i=e(i,t)},updateMapClasses:function(){if(s.container){var t=[],a=[];n.forEach(function(e){i[e]!==c[e]&&(t.push(e+"-"+c[e]),null!==i[e]&&a.push(e+"-"+i[e]))}),t.length>0&&s.container.classList.remove.apply(s.container.classList,t),a.length>0&&s.container.classList.add.apply(s.container.classList,a),c=e(c,i)}},addButtons:function(){var e=s.options.controls,n=document.createElement("div");return n.className=t.classes.CONTROL_GROUP+" "+t.classes.CONTROL_BASE,e?(e[t.types.LINE]&&(a[t.types.LINE]=l(t.types.LINE,{container:n,className:t.classes.CONTROL_BUTTON_LINE,title:"LineString tool "+(s.options.keybindings?"(l)":""),onActivate:function(){return s.events.changeMode(t.modes.DRAW_LINE_STRING)}})),e[t.types.POLYGON]&&(a[t.types.POLYGON]=l(t.types.POLYGON,{container:n,className:t.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(s.options.keybindings?"(p)":""),onActivate:function(){return s.events.changeMode(t.modes.DRAW_POLYGON)}})),e[t.types.POINT]&&(a[t.types.POINT]=l(t.types.POINT,{container:n,className:t.classes.CONTROL_BUTTON_POINT,title:"Marker tool "+(s.options.keybindings?"(m)":""),onActivate:function(){return s.events.changeMode(t.modes.DRAW_POINT)}})),e.trash&&(a.trash=l("trash",{container:n,className:t.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){s.events.trash()}})),e.combine_features&&(a.combine_features=l("combineFeatures",{container:n,className:t.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){s.events.combineFeatures()}})),e.uncombine_features&&(a.uncombine_features=l("uncombineFeatures",{container:n,className:t.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){s.events.uncombineFeatures()}})),n):n},removeButtons:function(){Object.keys(a).forEach(function(e){var t=a[e];t.parentNode&&t.parentNode.removeChild(t),delete a[e]})}}};
},{"xtend":"K5Tb","./constants":"CUIt"}],"Rc0E":[function(require,module,exports) {
var e=require("./events"),o=require("./store"),n=require("./ui"),r=require("./constants"),t=require("xtend");module.exports=function(a){var s=null,u=null,c={onRemove:function(){return a.map.off("load",c.connect),clearInterval(u),c.removeLayers(),a.store.restoreMapConfig(),a.ui.removeButtons(),a.events.removeEventListeners(),a.map=null,a.container=null,a.store=null,s&&s.parentNode&&s.parentNode.removeChild(s),s=null,this},connect:function(){a.map.off("load",c.connect),clearInterval(u),c.addLayers(),a.store.storeMapConfig(),a.events.addEventListeners()},onAdd:function(r){var i=r.fire;return r.fire=function(e,o){var n=arguments;return 1===i.length&&1!==arguments.length&&(n=[t({},{type:e},o)]),i.apply(r,n)},a.map=r,a.events=e(a),a.ui=n(a),a.container=r.getContainer(),a.store=new o(a),s=a.ui.addButtons(),a.options.boxSelect&&(r.boxZoom.disable(),r.dragPan.disable(),r.dragPan.enable()),r.loaded()?c.connect():(r.on("load",c.connect),u=setInterval(function(){r.loaded()&&c.connect()},16)),a.events.start(),s},addLayers:function(){a.map.addSource(r.sources.COLD,{data:{type:r.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),a.map.addSource(r.sources.HOT,{data:{type:r.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),a.options.styles.forEach(function(e){a.map.addLayer(e)}),a.store.setDirty(!0),a.store.render()},removeLayers:function(){a.options.styles.forEach(function(e){a.map.getLayer(e.id)&&a.map.removeLayer(e.id)}),a.map.getSource(r.sources.COLD)&&a.map.removeSource(r.sources.COLD),a.map.getSource(r.sources.HOT)&&a.map.removeSource(r.sources.HOT)}};return a.setup=c,c};
},{"./events":"1arB","./store":"mi7Y","./ui":"mgby","./constants":"CUIt","xtend":"K5Tb"}],"UQiY":[function(require,module,exports) {
module.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];
},{}],"Sq+j":[function(require,module,exports) {
var e=require("../constants");module.exports={isOfMetaType:function(e){return function(t){var r=t.featureTarget;return!!r&&(!!r.properties&&r.properties.meta===e)}},isShiftMousedown:function(e){return!!e.originalEvent&&(!!e.originalEvent.shiftKey&&0===e.originalEvent.button)},isActiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===e.activeStates.ACTIVE&&t.featureTarget.properties.meta===e.meta.FEATURE))},isInactiveFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&(t.featureTarget.properties.active===e.activeStates.INACTIVE&&t.featureTarget.properties.meta===e.meta.FEATURE))},noTarget:function(e){return void 0===e.featureTarget},isFeature:function(t){return!!t.featureTarget&&(!!t.featureTarget.properties&&t.featureTarget.properties.meta===e.meta.FEATURE)},isVertex:function(t){var r=t.featureTarget;return!!r&&(!!r.properties&&r.properties.meta===e.meta.VERTEX)},isShiftDown:function(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey},isEscapeKey:function(e){return 27===e.keyCode},isEnterKey:function(e){return 13===e.keyCode},true:function(){return!0}};
},{"../constants":"CUIt"}],"ckno":[function(require,module,exports) {
"use strict";function t(t,n){this.x=t,this.y=n}module.exports=t,t.prototype={clone:function(){return new t(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,i=t.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=n,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),i=Math.sin(t),s=n*this.x-i*this.y,r=i*this.x+n*this.y;return this.x=s,this.y=r,this},_rotateAround:function(t,n){var i=Math.cos(t),s=Math.sin(t),r=n.x+i*(this.x-n.x)-s*(this.y-n.y),h=n.y+s*(this.x-n.x)+i*(this.y-n.y);return this.x=r,this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},t.convert=function(n){return n instanceof t?n:Array.isArray(n)?new t(n[0],n[1]):n};
},{}],"T0Hm":[function(require,module,exports) {
var e=require("@mapbox/point-geometry");function t(t,n){var i=n.getBoundingClientRect();return new e(t.clientX-i.left-(n.clientLeft||0),t.clientY-i.top-(n.clientTop||0))}module.exports=t;
},{"@mapbox/point-geometry":"ckno"}],"s1U6":[function(require,module,exports) {
var e=require("../constants");module.exports=function(t,o,a,r){return{type:e.geojsonTypes.FEATURE,properties:{meta:e.meta.VERTEX,parent:t,coord_path:a,active:r?e.activeStates.ACTIVE:e.activeStates.INACTIVE},geometry:{type:e.geojsonTypes.POINT,coordinates:o}}};
},{"../constants":"CUIt"}],"A/5u":[function(require,module,exports) {
var e=require("../constants");module.exports=function(t,o,r,n){var a=o.geometry.coordinates,p=r.geometry.coordinates;if(a[1]>e.LAT_RENDERED_MAX||a[1]<e.LAT_RENDERED_MIN||p[1]>e.LAT_RENDERED_MAX||p[1]<e.LAT_RENDERED_MIN)return null;var E=n.project([a[0],a[1]]),s=n.project([p[0],p[1]]),c=n.unproject([(E.x+s.x)/2,(E.y+s.y)/2]);return{type:e.geojsonTypes.FEATURE,properties:{meta:e.meta.MIDPOINT,parent:t,lng:c.lng,lat:c.lat,coord_path:r.properties.coord_path},geometry:{type:e.geojsonTypes.POINT,coordinates:[c.lng,c.lat]}}};
},{"../constants":"CUIt"}],"1AOX":[function(require,module,exports) {
var e=require("./create_vertex"),r=require("./create_midpoint"),o=require("../constants");function n(t){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.geometry,c=a.type,u=a.coordinates,l=t.properties&&t.properties.id,f=[];function g(o,n){var t="",s=null;o.forEach(function(o,p){var a=null!=n?n+"."+p:String(p),c=e(l,o,a,d(a));if(i.midpoints&&s){var u=r(l,s,c,i.map);u&&f.push(u)}s=c;var g=JSON.stringify(o);t!==g&&f.push(c),0===p&&(t=g)})}function d(e){return!!i.selectedPaths&&-1!==i.selectedPaths.indexOf(e)}return c===o.geojsonTypes.POINT?f.push(e(l,u,p,d(p))):c===o.geojsonTypes.POLYGON?u.forEach(function(e,r){g(e,null!==p?p+"."+r:String(r))}):c===o.geojsonTypes.LINE_STRING?g(u,p):0===c.indexOf(o.geojsonTypes.MULTI_PREFIX)&&(s=c.replace(o.geojsonTypes.MULTI_PREFIX,""),u.forEach(function(e,r){var p={type:o.geojsonTypes.FEATURE,properties:t.properties,geometry:{type:s,coordinates:e}};f=f.concat(n(p,i,r))})),f}module.exports=n;
},{"./create_vertex":"s1U6","./create_midpoint":"A/5u","../constants":"CUIt"}],"qk6Q":[function(require,module,exports) {
module.exports={enable:function(o){setTimeout(function(){o.map&&o.map.doubleClickZoom&&o._ctx&&o._ctx.store&&o._ctx.store.getInitialConfigValue&&o._ctx.store.getInitialConfigValue("doubleClickZoom")&&o.map.doubleClickZoom.enable()},0)},disable:function(o){setTimeout(function(){o.map&&o.map.doubleClickZoom&&o.map.doubleClickZoom.disable()},0)}};
},{}],"NUQQ":[function(require,module,exports) {
module.exports=t;var e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function t(t){if(!t||!t.type)return null;var o=e[t.type];return o?"geometry"===o?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===o?{type:"FeatureCollection",features:[t]}:"featurecollection"===o?t:void 0:null}
},{}],"2f8P":[function(require,module,exports) {
function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce(function(t,r){return t.concat(e(r))},[]),t;case"Feature":return t.geometry?e(t.geometry).map(function(e){return{type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e}}):t;case"MultiPoint":return t.coordinates.map(function(e){return{type:"Point",coordinates:e}});case"MultiPolygon":return t.coordinates.map(function(e){return{type:"Polygon",coordinates:e}});case"MultiLineString":return t.coordinates.map(function(e){return{type:"LineString",coordinates:e}});case"GeometryCollection":return t.geometries.map(e).reduce(function(e,t){return e.concat(t)},[]);case"Point":case"Polygon":case"LineString":return[t]}}module.exports=e;
},{}],"OVh4":[function(require,module,exports) {
module.exports=function(r){return function r(n){if(Array.isArray(n)&&n.length&&"number"==typeof n[0])return[n];return n.reduce(function(n,e){return Array.isArray(e)&&Array.isArray(e[0])?n.concat(r(e)):(n.push(e),n)},[])}(r)};
},{}],"d8tD":[function(require,module,exports) {
var e=require("@mapbox/geojson-normalize"),r=require("geojson-flatten"),o=require("./flatten");module.exports=function(t){if(!t)return[];var n=r(e(t)),a=[];return n.features.forEach(function(e){e.geometry&&(a=a.concat(o(e.geometry.coordinates)))}),a};
},{"@mapbox/geojson-normalize":"NUQQ","geojson-flatten":"2f8P","./flatten":"OVh4"}],"c1zk":[function(require,module,exports) {
var e=module.exports=function(e){return new t(e)};function t(e){this.value=e}function n(e,t,n){var u=[],i=[],c=!0;return function e(a){var f=n?o(a):a,l={},p=!0,y={node:f,node_:a,path:[].concat(u),parent:i[i.length-1],parents:i,key:u.slice(-1)[0],isRoot:0===u.length,level:u.length,circular:null,update:function(e,t){y.isRoot||(y.parent.node[y.key]=e),y.node=e,t&&(p=!1)},delete:function(e){delete y.parent.node[y.key],e&&(p=!1)},remove:function(e){s(y.parent.node)?y.parent.node.splice(y.key,1):delete y.parent.node[y.key],e&&(p=!1)},keys:null,before:function(e){l.before=e},after:function(e){l.after=e},pre:function(e){l.pre=e},post:function(e){l.post=e},stop:function(){c=!1},block:function(){p=!1}};if(!c)return y;function d(){if("object"==typeof y.node&&null!==y.node){y.keys&&y.node_===y.node||(y.keys=r(y.node)),y.isLeaf=0==y.keys.length;for(var e=0;e<i.length;e++)if(i[e].node_===a){y.circular=i[e];break}}else y.isLeaf=!0,y.keys=null;y.notLeaf=!y.isLeaf,y.notRoot=!y.isRoot}d();var b=t.call(y,y.node);return void 0!==b&&y.update&&y.update(b),l.before&&l.before.call(y,y.node),p?("object"!=typeof y.node||null===y.node||y.circular||(i.push(y),d(),h(y.keys,function(t,o){u.push(t),l.pre&&l.pre.call(y,y.node[t],t);var r=e(y.node[t]);n&&v.call(y.node,t)&&(y.node[t]=r.node),r.isLast=o==y.keys.length-1,r.isFirst=0==o,l.post&&l.post.call(y,r),u.pop()}),i.pop()),l.after&&l.after.call(y,y.node),y):y}(e).node}function o(e){if("object"==typeof e&&null!==e){var t;if(s(e))t=[];else if(i(e))t=new Date(e.getTime?e.getTime():e);else if(c(e))t=new RegExp(e);else if(a(e))t={message:e.message};else if(f(e))t=new Boolean(e);else if(l(e))t=new Number(e);else if(p(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},o=function(){};o.prototype=n,t=new o}return h(r(e),function(n){t[n]=e[n]}),t}return e}t.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var o=e[n];if(!t||!v.call(t,o)){t=void 0;break}t=t[o]}return t},t.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var o=e[n];if(!t||!v.call(t,o))return!1;t=t[o]}return!0},t.prototype.set=function(e,t){for(var n=this.value,o=0;o<e.length-1;o++){var r=e[o];v.call(n,r)||(n[r]={}),n=n[r]}return n[e[o]]=t,t},t.prototype.map=function(e){return n(this.value,e,!0)},t.prototype.forEach=function(e){return this.value=n(this.value,e,!1),this.value},t.prototype.reduce=function(e,t){var n=1===arguments.length,o=n?this.value:t;return this.forEach(function(t){this.isRoot&&n||(o=e.call(this,o,t))}),o},t.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},t.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},t.prototype.clone=function(){var e=[],t=[];return function n(u){for(var i=0;i<e.length;i++)if(e[i]===u)return t[i];if("object"==typeof u&&null!==u){var c=o(u);return e.push(u),t.push(c),h(r(u),function(e){c[e]=n(u[e])}),e.pop(),t.pop(),c}return u}(this.value)};var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};function u(e){return Object.prototype.toString.call(e)}function i(e){return"[object Date]"===u(e)}function c(e){return"[object RegExp]"===u(e)}function a(e){return"[object Error]"===u(e)}function f(e){return"[object Boolean]"===u(e)}function l(e){return"[object Number]"===u(e)}function p(e){return"[object String]"===u(e)}var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};h(r(t.prototype),function(n){e[n]=function(e){var o=[].slice.call(arguments,1),r=new t(e);return r[n].apply(r,o)}});var v=Object.hasOwnProperty||function(e,t){return t in e};
},{}],"+zuX":[function(require,module,exports) {
function t(b){if(!(this instanceof t))return new t(b);this._bbox=b||[1/0,1/0,-1/0,-1/0],this._valid=!!b}module.exports=t,t.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},t.prototype.equals=function(b){var i;return i=b instanceof t?b.bbox():b,this._bbox[0]==i[0]&&this._bbox[1]==i[1]&&this._bbox[2]==i[2]&&this._bbox[3]==i[3]},t.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},t.prototype.union=function(b){var i;return this._valid=!0,i=b instanceof t?b.bbox():b,this._bbox[0]=Math.min(this._bbox[0],i[0]),this._bbox[1]=Math.min(this._bbox[1],i[1]),this._bbox[2]=Math.max(this._bbox[2],i[2]),this._bbox[3]=Math.max(this._bbox[3],i[3]),this},t.prototype.bbox=function(){return this._valid?this._bbox:null},t.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var b=t[0],i=t[1];return this._bbox[0]<=b&&this._bbox[1]<=i&&this._bbox[2]>=b&&this._bbox[3]>=i},t.prototype.intersect=function(b){return this._valid?(i=b instanceof t?b.bbox():b,!(this._bbox[0]>i[2]||this._bbox[2]<i[0]||this._bbox[3]<i[1]||this._bbox[1]>i[3])):null;var i},t.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},t.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};
},{}],"rlu0":[function(require,module,exports) {
var e=require("@mapbox/geojson-coords"),o=require("traverse"),t=require("@mapbox/extent"),n={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},r=Object.keys(n);function i(o){for(var n=t(),r=e(o),i=0;i<r.length;i++)n.include(r[i]);return n}module.exports=function(e){return i(e).bbox()},module.exports.polygon=function(e){return i(e).polygon()},module.exports.bboxify=function(e){return o(e).map(function(e){e&&(r.some(function(o){return!!e[o]&&-1!==n[o].indexOf(e.type)})&&(e.bbox=i(e).bbox(),this.update(e)))})};
},{"@mapbox/geojson-coords":"d8tD","traverse":"c1zk","@mapbox/extent":"+zuX"}],"pk+O":[function(require,module,exports) {
var a=require("@mapbox/geojson-extent"),t=require("../constants"),l=t.LAT_MIN,n=t.LAT_MAX,e=t.LAT_RENDERED_MIN,r=t.LAT_RENDERED_MAX,M=t.LNG_MIN,o=t.LNG_MAX;module.exports=function(t,_){var g=l,A=n,E=l,N=n,c=o,i=M;t.forEach(function(t){var l=a(t),n=l[1],e=l[3],r=l[0],M=l[2];n>g&&(g=n),e<A&&(A=e),e>E&&(E=e),n<N&&(N=n),r<c&&(c=r),M>i&&(i=M)});var s=_;return g+s.lat>r&&(s.lat=r-g),E+s.lat>n&&(s.lat=n-E),A+s.lat<e&&(s.lat=e-A),N+s.lat<l&&(s.lat=l-N),c+s.lng<=M&&(s.lng+=360*Math.ceil(Math.abs(s.lng)/360)),i+s.lng>=o&&(s.lng-=360*Math.ceil(Math.abs(s.lng)/360)),s};
},{"@mapbox/geojson-extent":"rlu0","../constants":"CUIt"}],"kZ00":[function(require,module,exports) {
var n=require("./constrain_feature_movement"),e=require("../constants");module.exports=function(o,t){var r=n(o.map(function(n){return n.toGeoJSON()}),t);o.forEach(function(n){var o=n.getCoordinates(),t=function(n){var e={lng:n[0]+r.lng,lat:n[1]+r.lat};return[e.lng,e.lat]},p=function(n){return n.map(function(n){return t(n)})},a=void 0;n.type===e.geojsonTypes.POINT?a=t(o):n.type===e.geojsonTypes.LINE_STRING||n.type===e.geojsonTypes.MULTI_POINT?a=o.map(t):n.type===e.geojsonTypes.POLYGON||n.type===e.geojsonTypes.MULTI_LINE_STRING?a=o.map(p):n.type===e.geojsonTypes.MULTI_POLYGON&&(a=o.map(function(n){return n.map(function(n){return p(n)})})),n.incomingCoords(a)})};
},{"./constrain_feature_movement":"pk+O","../constants":"CUIt"}],"C8OA":[function(require,module,exports) {
var e=require("../lib/common_selectors"),t=require("../lib/mouse_event_point"),i=require("../lib/create_supplementary_points"),n=require("../lib/string_set"),o=require("../lib/double_click_zoom"),r=require("../lib/move_features"),s=require("../constants"),a={onSetup:function(e){var t=this,i={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(i.initiallySelectedFeatureIds.filter(function(e){return void 0!==t.getFeature(e)})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),i},fireUpdate:function(){this.map.fire(s.events.UPDATE,{action:s.updateActions.MOVE,features:this.getSelected().map(function(e){return e.toGeoJSON()})})},fireActionable:function(){var e=this,t=this.getSelected(),i=t.filter(function(t){return e.isInstanceOf("MultiFeature",t)}),n=!1;if(t.length>1){n=!0;var o=t[0].type.replace("Multi","");t.forEach(function(e){e.type.replace("Multi","")!==o&&(n=!1)})}var r=i.length>0,s=t.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:r,trash:s})},getUniqueIds:function(e){return e.length?e.map(function(e){return e.properties.id}).filter(function(e){return void 0!==e}).reduce(function(e,t){return e.add(t),e},new n).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){o.enable(this)},onMouseUp:function(t,i){if(e.true(i))return this.stopExtendedInteractions(t)},onMouseMove:function(e){return this.stopExtendedInteractions(e)},onMouseOut:function(e){if(e.dragMoving)return this.fireUpdate()}};a.onTap=a.onClick=function(t,i){return e.noTarget(i)?this.clickAnywhere(t,i):e.isOfMetaType(s.meta.VERTEX)(i)?this.clickOnVertex(t,i):e.isFeature(i)?this.clickOnFeature(t,i):void 0},a.clickAnywhere=function(e){var t=this,i=this.getSelectedIds();i.length&&(this.clearSelectedFeatures(),i.forEach(function(e){return t.doRender(e)})),o.enable(this),this.stopExtendedInteractions(e)},a.clickOnVertex=function(e,t){this.changeMode(s.modes.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:s.cursors.MOVE})},a.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},a.clickOnFeature=function(t,i){var n=this;o.disable(this),this.stopExtendedInteractions(t);var r=e.isShiftDown(i),a=this.getSelectedIds(),c=i.featureTarget.properties.id,l=this.isSelected(c);if(!r&&l&&this.getFeature(c).type!==s.geojsonTypes.POINT)return this.changeMode(s.modes.DIRECT_SELECT,{featureId:c});l&&r?(this.deselect(c),this.updateUIClasses({mouse:s.cursors.POINTER}),1===a.length&&o.enable(this)):!l&&r?(this.select(c),this.updateUIClasses({mouse:s.cursors.MOVE})):l||r||(a.forEach(function(e){return n.doRender(e)}),this.setSelected(c),this.updateUIClasses({mouse:s.cursors.MOVE})),this.doRender(c)},a.onMouseDown=function(t,i){return e.isActiveFeature(i)?this.startOnActiveFeature(t,i):this.drawConfig.boxSelect&&e.isShiftMousedown(i)?this.startBoxSelect(t,i):void 0},a.startBoxSelect=function(e,i){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=t(i.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},a.onTouchStart=function(t,i){if(e.isActiveFeature(i))return this.startOnActiveFeature(t,i)},a.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},a.whileBoxSelect=function(e,i){e.boxSelecting=!0,this.updateUIClasses({mouse:s.cursors.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(s.classes.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));var n=t(i.originalEvent,this.map.getContainer()),o=Math.min(e.boxSelectStartLocation.x,n.x),r=Math.max(e.boxSelectStartLocation.x,n.x),a=Math.min(e.boxSelectStartLocation.y,n.y),c=Math.max(e.boxSelectStartLocation.y,n.y),l="translate("+o+"px, "+a+"px)";e.boxSelectElement.style.transform=l,e.boxSelectElement.style.WebkitTransform=l,e.boxSelectElement.style.width=r-o+"px",e.boxSelectElement.style.height=c-a+"px"},a.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var i={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};r(this.getSelected(),i),e.dragMoveLocation=t.lngLat},a.onMouseUp=function(e,i){var n=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var o=[e.boxSelectStartLocation,t(i.originalEvent,this.map.getContainer())],r=this.featuresAt(null,o,"click"),a=this.getUniqueIds(r).filter(function(e){return!n.isSelected(e)});a.length&&(this.select(a),a.forEach(function(e){return n.doRender(e)}),this.updateUIClasses({mouse:s.cursors.MOVE}))}this.stopExtendedInteractions(e)},a.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?s.activeStates.ACTIVE:s.activeStates.INACTIVE,n(t),this.fireActionable(),t.properties.active===s.activeStates.ACTIVE&&t.geometry.type!==s.geojsonTypes.POINT&&i(t).forEach(n)},a.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},a.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],i=[],n=e[0].type.replace("Multi",""),o=0;o<e.length;o++){var r=e[o];if(r.type.replace("Multi","")!==n)return;r.type.includes("Multi")?r.getCoordinates().forEach(function(e){t.push(e)}):t.push(r.getCoordinates()),i.push(r.toGeoJSON())}if(i.length>1){var a=this.newFeature({type:s.geojsonTypes.FEATURE,properties:i[0].properties,geometry:{type:"Multi"+n,coordinates:t}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(s.events.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:i})}this.fireActionable()}},a.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var i=[],n=[],o=function(o){var r=t[o];e.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach(function(t){e.addFeature(t),t.properties=r.properties,i.push(t.toGeoJSON()),e.select([t.id])}),e.deleteFeature(r.id,{silent:!0}),n.push(r.toGeoJSON()))},r=0;r<t.length;r++)o(r);i.length>1&&this.map.fire(s.events.UNCOMBINE_FEATURES,{createdFeatures:i,deletedFeatures:n}),this.fireActionable()}},module.exports=a;
},{"../lib/common_selectors":"Sq+j","../lib/mouse_event_point":"T0Hm","../lib/create_supplementary_points":"1AOX","../lib/string_set":"Y+E8","../lib/double_click_zoom":"qk6Q","../lib/move_features":"kZ00","../constants":"CUIt"}],"eMbc":[function(require,module,exports) {
var e=require("../lib/common_selectors"),t=e.noTarget,o=e.isOfMetaType,a=e.isInactiveFeature,r=e.isShiftDown,i=require("../lib/create_supplementary_points"),n=require("../lib/constrain_feature_movement"),s=require("../lib/double_click_zoom"),c=require("../constants"),d=require("../lib/common_selectors"),u=require("../lib/move_features"),h=o(c.meta.VERTEX),l=o(c.meta.MIDPOINT),g={fireUpdate:function(){this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,features:this.getSelected().map(function(e){return e.toGeoJSON()})})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var o=t.featureTarget.properties,a=e.selectedCoordPaths.indexOf(o.coord_path);r(t)||-1!==a?r(t)&&-1===a&&e.selectedCoordPaths.push(o.coord_path):e.selectedCoordPaths=[o.coord_path];var i=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(e,t){this.startDragging(e,t);var o=t.featureTarget.properties;e.feature.addCoordinate(o.coord_path,o.lng,o.lat),this.fireUpdate(),e.selectedCoordPaths=[o.coord_path]},pathsToCoordinates:function(e,t){return t.map(function(t){return{feature_id:e,coord_path:t}})},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,o){u(this.getSelected(),o),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,o){for(var a=e.selectedCoordPaths.map(function(t){return e.feature.getCoordinate(t)}),r=a.map(function(e){return{type:c.geojsonTypes.FEATURE,properties:{},geometry:{type:c.geojsonTypes.POINT,coordinates:e}}}),i=n(r,o),s=0;s<a.length;s++){var d=a[s];e.feature.updateCoordinate(e.selectedCoordPaths[s],d[0]+i.lng,d[1]+i.lat)}},clickNoTarget:function(){this.changeMode(c.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(c.modes.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,o=this.getFeature(t);if(!o)throw new Error("You must provide a featureId to enter direct_select mode");if(o.type===c.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var a={featureId:t,feature:o,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,a.selectedCoordPaths)),this.setSelected(t),s.disable(this),this.setActionableState({trash:!0}),a},onStop:function(){s.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,o){e.featureId===t.properties.id?(t.properties.active=c.activeStates.ACTIVE,o(t),i(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(o)):(t.properties.active=c.activeStates.INACTIVE,o(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort().reverse().forEach(function(t){return e.feature.removeCoordinate(t)}),this.map.fire(c.events.UPDATE,{action:c.updateActions.CHANGE_COORDINATES,features:this.getSelected().map(function(e){return e.toGeoJSON()})}),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(c.modes.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var o=d.isActiveFeature(t),a=h(t),r=0===e.selectedCoordPaths.length;o&&r?this.updateUIClasses({mouse:c.cursors.MOVE}):a&&!r?this.updateUIClasses({mouse:c.cursors.MOVE}):this.updateUIClasses({mouse:c.cursors.NONE}),this.stopDragging(e)},onMouseOut:function(e){e.dragMoving&&this.fireUpdate()}};g.onTouchStart=g.onMouseDown=function(e,t){return h(t)?this.onVertex(e,t):d.isActiveFeature(t)?this.onFeature(e,t):l(t)?this.onMidpoint(e,t):void 0},g.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var o={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,o):this.dragFeature(e,t,o),e.dragMoveLocation=t.lngLat}},g.onClick=function(e,o){return t(o)?this.clickNoTarget(e,o):d.isActiveFeature(o)?this.clickActiveFeature(e,o):a(o)?this.clickInactive(e,o):void this.stopDragging(e)},g.onTap=function(e,o){return t(o)?this.clickNoTarget(e,o):d.isActiveFeature(o)?this.clickActiveFeature(e,o):a(o)?this.clickInactive(e,o):void 0},g.onTouchEnd=g.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)},module.exports=g;
},{"../lib/common_selectors":"Sq+j","../lib/create_supplementary_points":"1AOX","../lib/constrain_feature_movement":"pk+O","../lib/double_click_zoom":"qk6Q","../constants":"CUIt","../lib/move_features":"kZ00"}],"bBfg":[function(require,module,exports) {
var e=require("../lib/common_selectors"),t=require("../constants"),o={onSetup:function(){var e=this.newFeature({type:t.geojsonTypes.FEATURE,properties:{},geometry:{type:t.geojsonTypes.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:t.cursors.ADD}),this.activateUIButton(t.types.POINT),this.setActionableState({trash:!0}),{point:e}},stopDrawingAndRemove:function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(t.modes.SIMPLE_SELECT)}};o.onTap=o.onClick=function(e,o){this.updateUIClasses({mouse:t.cursors.MOVE}),e.point.updateCoordinate("",o.lngLat.lng,o.lngLat.lat),this.map.fire(t.events.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(t.modes.SIMPLE_SELECT,{featureIds:[e.point.id]})},o.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},o.toDisplayFeatures=function(e,o,s){var i=o.properties.id===e.point.id;if(o.properties.active=i?t.activeStates.ACTIVE:t.activeStates.INACTIVE,!i)return s(o)},o.onTrash=o.stopDrawingAndRemove,o.onKeyUp=function(t,o){if(e.isEscapeKey(o)||e.isEnterKey(o))return this.stopDrawingAndRemove(t,o)},module.exports=o;
},{"../lib/common_selectors":"Sq+j","../constants":"CUIt"}],"kyQq":[function(require,module,exports) {
function n(n,t){return!!n.lngLat&&(n.lngLat.lng===t[0]&&n.lngLat.lat===t[1])}module.exports=n;
},{}],"Tf0W":[function(require,module,exports) {
var e=require("../lib/common_selectors"),t=require("../lib/double_click_zoom"),o=require("../constants"),r=require("../lib/is_event_at_coordinates"),i=require("../lib/create_vertex"),n={onSetup:function(){var e=this.newFeature({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),t.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&r(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:o.cursors.ADD}),e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(t,r){t.polygon.updateCoordinate("0."+t.currentVertexPosition,r.lngLat.lng,r.lngLat.lat),e.isVertex(r)&&this.updateUIClasses({mouse:o.cursors.POINTER})}};n.onTap=n.onClick=function(t,o){return e.isVertex(o)?this.clickOnVertex(t,o):this.clickAnywhere(t,o)},n.onKeyUp=function(t,r){e.isEscapeKey(r)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)):e.isEnterKey(r)&&this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},n.onStop=function(e){this.updateUIClasses({mouse:o.cursors.NONE}),t.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0."+e.currentVertexPosition),e.polygon.isValid()?this.map.fire(o.events.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},n.toDisplayFeatures=function(e,t,r){var n=t.properties.id===e.polygon.id;if(t.properties.active=n?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!n)return r(t);if(0!==t.geometry.coordinates.length){var s=t.geometry.coordinates[0].length;if(!(s<3)){if(t.properties.meta=o.meta.FEATURE,r(i(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),s>3){var a=t.geometry.coordinates[0].length-3;r(i(e.polygon.id,t.geometry.coordinates[0][a],"0."+a,!1))}if(s<=4){var c=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:o.geojsonTypes.FEATURE,properties:t.properties,geometry:{coordinates:c,type:o.geojsonTypes.LINE_STRING}}),3===s)return}return r(t)}}},n.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},module.exports=n;
},{"../lib/common_selectors":"Sq+j","../lib/double_click_zoom":"qk6Q","../constants":"CUIt","../lib/is_event_at_coordinates":"kyQq","../lib/create_vertex":"s1U6"}],"WKIS":[function(require,module,exports) {
function e(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var t=require("../lib/common_selectors"),r=require("../lib/is_event_at_coordinates"),i=require("../lib/double_click_zoom"),o=require("../constants"),n=require("../lib/create_vertex"),a={onSetup:function(t){var r=(t=t||{}).featureId,n=void 0,a=void 0,s="forward";if(r){if(!(n=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var d=t.from;if(d&&"Feature"===d.type&&d.geometry&&"Point"===d.geometry.type&&(d=d.geometry),d&&"Point"===d.type&&d.coordinates&&2===d.coordinates.length&&(d=d.coordinates),!d||!Array.isArray(d))throw new Error("Please use the `from` property to indicate which point to continue the line from");var c=n.coordinates.length-1;if(n.coordinates[c][0]===d[0]&&n.coordinates[c][1]===d[1]){var l;a=c+1,(l=n).addCoordinate.apply(l,[a].concat(e(n.coordinates[c])))}else{if(n.coordinates[0][0]!==d[0]||n.coordinates[0][1]!==d[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");var u;s="backwards",a=0,(u=n).addCoordinate.apply(u,[a].concat(e(n.coordinates[0])))}}else n=this.newFeature({type:o.geojsonTypes.FEATURE,properties:{},geometry:{type:o.geojsonTypes.LINE_STRING,coordinates:[]}}),a=0,this.addFeature(n);return this.clearSelectedFeatures(),i.disable(this),this.updateUIClasses({mouse:o.cursors.ADD}),this.activateUIButton(o.types.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:a,direction:s}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&r(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&r(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:o.cursors.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,r){e.line.updateCoordinate(e.currentVertexPosition,r.lngLat.lng,r.lngLat.lat),t.isVertex(r)&&this.updateUIClasses({mouse:o.cursors.POINTER})}};a.onTap=a.onClick=function(e,r){if(t.isVertex(r))return this.clickOnVertex(e,r);this.clickAnywhere(e,r)},a.onKeyUp=function(e,r){t.isEnterKey(r)?this.changeMode(o.modes.SIMPLE_SELECT,{featureIds:[e.line.id]}):t.isEscapeKey(r)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT))},a.onStop=function(e){i.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate(""+e.currentVertexPosition),e.line.isValid()?this.map.fire(o.events.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT,{},{silent:!0})))},a.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(o.modes.SIMPLE_SELECT)},a.toDisplayFeatures=function(e,t,r){var i=t.properties.id===e.line.id;if(t.properties.active=i?o.activeStates.ACTIVE:o.activeStates.INACTIVE,!i)return r(t);t.geometry.coordinates.length<2||(t.properties.meta=o.meta.FEATURE,r(n(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],""+("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),r(t))},module.exports=a;
},{"../lib/common_selectors":"Sq+j","../lib/is_event_at_coordinates":"kyQq","../lib/double_click_zoom":"qk6Q","../constants":"CUIt","../lib/create_vertex":"s1U6"}],"oyz7":[function(require,module,exports) {
var e=["simple_select","direct_select","draw_point","draw_polygon","draw_line_string"];module.exports=e.reduce(function(e,r){return e[r]=require("./"+r),e},{}),module.exports={simple_select:require("./simple_select"),direct_select:require("./direct_select"),draw_point:require("./draw_point"),draw_polygon:require("./draw_polygon"),draw_line_string:require("./draw_line_string")};
},{"./simple_select":"C8OA","./direct_select":"eMbc","./draw_point":"bBfg","./draw_polygon":"Tf0W","./draw_line_string":"WKIS"}],"2pB9":[function(require,module,exports) {
var e=require("xtend"),o=require("./constants"),t={defaultMode:o.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:require("./lib/theme"),modes:require("./modes"),controls:{},userProperties:!1},r={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},s={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function n(t,r){return t.map(function(t){return t.source?t:e(t,{id:t.id+"."+r,source:"hot"===r?o.sources.HOT:o.sources.COLD})})}module.exports=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e(o);return o.controls||(l.controls={}),!1===o.displayControlsDefault?l.controls=e(s,o.controls):l.controls=e(r,o.controls),(l=e(t,l)).styles=n(l.styles,"cold").concat(n(l.styles,"hot")),l};
},{"xtend":"K5Tb","./constants":"CUIt","./lib/theme":"UQiY","./modes":"oyz7"}],"/a1X":[function(require,module,exports) {
var global = arguments[3];

var t=arguments[3],e=200,r="__lodash_hash_undefined__",n=1,o=2,i=9007199254740991,u="[object Arguments]",a="[object Array]",c="[object AsyncFunction]",s="[object Boolean]",f="[object Date]",l="[object Error]",_="[object Function]",h="[object GeneratorFunction]",p="[object Map]",v="[object Number]",y="[object Null]",b="[object Object]",d="[object Promise]",g="[object Proxy]",j="[object RegExp]",w="[object Set]",m="[object String]",z="[object Symbol]",A="[object Undefined]",O="[object WeakMap]",S="[object ArrayBuffer]",x="[object DataView]",k="[object Float32Array]",E="[object Float64Array]",F="[object Int8Array]",P="[object Int16Array]",$="[object Int32Array]",U="[object Uint8Array]",B="[object Uint8ClampedArray]",I="[object Uint16Array]",L="[object Uint32Array]",T=/[\\^$.*+?()[\]{}|]/g,M=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,R={};R[k]=R[E]=R[F]=R[P]=R[$]=R[U]=R[B]=R[I]=R[L]=!0,R[u]=R[a]=R[S]=R[s]=R[x]=R[f]=R[l]=R[_]=R[p]=R[v]=R[b]=R[j]=R[w]=R[m]=R[O]=!1;var C="object"==typeof t&&t&&t.Object===Object&&t,N="object"==typeof self&&self&&self.Object===Object&&self,V=C||N||Function("return this")(),W="object"==typeof exports&&exports&&!exports.nodeType&&exports,G=W&&"object"==typeof module&&module&&!module.nodeType&&module,q=G&&G.exports===W,H=q&&C.process,J=function(){try{return H&&H.binding&&H.binding("util")}catch(t){}}(),K=J&&J.isTypedArray;function Q(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}function X(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function Y(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Z(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function tt(t){return function(e){return t(e)}}function et(t,e){return t.has(e)}function rt(t,e){return null==t?void 0:t[e]}function nt(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function ot(t,e){return function(r){return t(e(r))}}function it(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var ut=Array.prototype,at=Function.prototype,ct=Object.prototype,st=V["__core-js_shared__"],ft=at.toString,lt=ct.hasOwnProperty,_t=function(){var t=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ht=ct.toString,pt=RegExp("^"+ft.call(lt).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=q?V.Buffer:void 0,yt=V.Symbol,bt=V.Uint8Array,dt=ct.propertyIsEnumerable,gt=ut.splice,jt=yt?yt.toStringTag:void 0,wt=Object.getOwnPropertySymbols,mt=vt?vt.isBuffer:void 0,zt=ot(Object.keys,Object),At=Oe(V,"DataView"),Ot=Oe(V,"Map"),St=Oe(V,"Promise"),xt=Oe(V,"Set"),kt=Oe(V,"WeakMap"),Et=Oe(Object,"create"),Ft=Be(At),Pt=Be(Ot),$t=Be(St),Ut=Be(xt),Bt=Be(kt),It=yt?yt.prototype:void 0,Lt=It?It.valueOf:void 0;function Tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Mt(){this.__data__=Et?Et(null):{},this.size=0}function Dt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Rt(t){var e=this.__data__;if(Et){var n=e[t];return n===r?void 0:n}return lt.call(e,t)?e[t]:void 0}function Ct(t){var e=this.__data__;return Et?void 0!==e[t]:lt.call(e,t)}function Nt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Et&&void 0===e?r:e,this}function Vt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Wt(){this.__data__=[],this.size=0}function Gt(t){var e=this.__data__,r=le(e,t);return!(r<0)&&(r==e.length-1?e.pop():gt.call(e,r,1),--this.size,!0)}function qt(t){var e=this.__data__,r=le(e,t);return r<0?void 0:e[r][1]}function Ht(t){return le(this.__data__,t)>-1}function Jt(t,e){var r=this.__data__,n=le(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function Kt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Qt(){this.size=0,this.__data__={hash:new Tt,map:new(Ot||Vt),string:new Tt}}function Xt(t){var e=Ae(this,t).delete(t);return this.size-=e?1:0,e}function Yt(t){return Ae(this,t).get(t)}function Zt(t){return Ae(this,t).has(t)}function te(t,e){var r=Ae(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function ee(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Kt;++e<r;)this.add(t[e])}function re(t){return this.__data__.set(t,r),this}function ne(t){return this.__data__.has(t)}function oe(t){var e=this.__data__=new Vt(t);this.size=e.size}function ie(){this.__data__=new Vt,this.size=0}function ue(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function ae(t){return this.__data__.get(t)}function ce(t){return this.__data__.has(t)}function se(t,r){var n=this.__data__;if(n instanceof Vt){var o=n.__data__;if(!Ot||o.length<e-1)return o.push([t,r]),this.size=++n.size,this;n=this.__data__=new Kt(o)}return n.set(t,r),this.size=n.size,this}function fe(t,e){var r=Te(t),n=!r&&Le(t),o=!r&&!n&&De(t),i=!r&&!n&&!o&&Ge(t),u=r||n||o||i,a=u?Z(t.length,String):[],c=a.length;for(var s in t)!e&&!lt.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ee(s,c))||a.push(s);return a}function le(t,e){for(var r=t.length;r--;)if(Ie(t[r][0],e))return r;return-1}function _e(t,e,r){var n=e(t);return Te(t)?n:X(n,r(t))}function he(t){return null==t?void 0===t?A:y:jt&&jt in Object(t)?Se(t):Ue(t)}function pe(t){return We(t)&&he(t)==u}function ve(t,e,r,n,o){return t===e||(null==t||null==e||!We(t)&&!We(e)?t!=t&&e!=e:ye(t,e,r,n,ve,o))}function ye(t,e,r,o,i,c){var s=Te(t),f=Te(e),l=s?a:ke(t),_=f?a:ke(e),h=(l=l==u?b:l)==b,p=(_=_==u?b:_)==b,v=l==_;if(v&&De(t)){if(!De(e))return!1;s=!0,h=!1}if(v&&!h)return c||(c=new oe),s||Ge(t)?je(t,e,r,o,i,c):we(t,e,l,r,o,i,c);if(!(r&n)){var y=h&&lt.call(t,"__wrapped__"),d=p&&lt.call(e,"__wrapped__");if(y||d){var g=y?t.value():t,j=d?e.value():e;return c||(c=new oe),i(g,j,r,o,c)}}return!!v&&(c||(c=new oe),me(t,e,r,o,i,c))}function be(t){return!(!Ve(t)||Pe(t))&&(Ce(t)?pt:M).test(Be(t))}function de(t){return We(t)&&Ne(t.length)&&!!R[he(t)]}function ge(t){if(!$e(t))return zt(t);var e=[];for(var r in Object(t))lt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function je(t,e,r,i,u,a){var c=r&n,s=t.length,f=e.length;if(s!=f&&!(c&&f>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var _=-1,h=!0,p=r&o?new ee:void 0;for(a.set(t,e),a.set(e,t);++_<s;){var v=t[_],y=e[_];if(i)var b=c?i(y,v,_,e,t,a):i(v,y,_,t,e,a);if(void 0!==b){if(b)continue;h=!1;break}if(p){if(!Y(e,function(t,e){if(!et(p,e)&&(v===t||u(v,t,r,i,a)))return p.push(e)})){h=!1;break}}else if(v!==y&&!u(v,y,r,i,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function we(t,e,r,i,u,a,c){switch(r){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case S:return!(t.byteLength!=e.byteLength||!a(new bt(t),new bt(e)));case s:case f:case v:return Ie(+t,+e);case l:return t.name==e.name&&t.message==e.message;case j:case m:return t==e+"";case p:var _=nt;case w:var h=i&n;if(_||(_=it),t.size!=e.size&&!h)return!1;var y=c.get(t);if(y)return y==e;i|=o,c.set(t,e);var b=je(_(t),_(e),i,u,a,c);return c.delete(t),b;case z:if(Lt)return Lt.call(t)==Lt.call(e)}return!1}function me(t,e,r,o,i,u){var a=r&n,c=ze(t),s=c.length;if(s!=ze(e).length&&!a)return!1;for(var f=s;f--;){var l=c[f];if(!(a?l in e:lt.call(e,l)))return!1}var _=u.get(t);if(_&&u.get(e))return _==e;var h=!0;u.set(t,e),u.set(e,t);for(var p=a;++f<s;){var v=t[l=c[f]],y=e[l];if(o)var b=a?o(y,v,l,e,t,u):o(v,y,l,t,e,u);if(!(void 0===b?v===y||i(v,y,r,o,u):b)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var d=t.constructor,g=e.constructor;d!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof g&&g instanceof g)&&(h=!1)}return u.delete(t),u.delete(e),h}function ze(t){return _e(t,qe,xe)}function Ae(t,e){var r=t.__data__;return Fe(e)?r["string"==typeof e?"string":"hash"]:r.map}function Oe(t,e){var r=rt(t,e);return be(r)?r:void 0}function Se(t){var e=lt.call(t,jt),r=t[jt];try{t[jt]=void 0;var n=!0}catch(t){}var o=ht.call(t);return n&&(e?t[jt]=r:delete t[jt]),o}Tt.prototype.clear=Mt,Tt.prototype.delete=Dt,Tt.prototype.get=Rt,Tt.prototype.has=Ct,Tt.prototype.set=Nt,Vt.prototype.clear=Wt,Vt.prototype.delete=Gt,Vt.prototype.get=qt,Vt.prototype.has=Ht,Vt.prototype.set=Jt,Kt.prototype.clear=Qt,Kt.prototype.delete=Xt,Kt.prototype.get=Yt,Kt.prototype.has=Zt,Kt.prototype.set=te,ee.prototype.add=ee.prototype.push=re,ee.prototype.has=ne,oe.prototype.clear=ie,oe.prototype.delete=ue,oe.prototype.get=ae,oe.prototype.has=ce,oe.prototype.set=se;var xe=wt?function(t){return null==t?[]:(t=Object(t),Q(wt(t),function(e){return dt.call(t,e)}))}:He,ke=he;function Ee(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||D.test(t))&&t>-1&&t%1==0&&t<e}function Fe(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Pe(t){return!!_t&&_t in t}function $e(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ct)}function Ue(t){return ht.call(t)}function Be(t){if(null!=t){try{return ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ie(t,e){return t===e||t!=t&&e!=e}(At&&ke(new At(new ArrayBuffer(1)))!=x||Ot&&ke(new Ot)!=p||St&&ke(St.resolve())!=d||xt&&ke(new xt)!=w||kt&&ke(new kt)!=O)&&(ke=function(t){var e=he(t),r=e==b?t.constructor:void 0,n=r?Be(r):"";if(n)switch(n){case Ft:return x;case Pt:return p;case $t:return d;case Ut:return w;case Bt:return O}return e});var Le=pe(function(){return arguments}())?pe:function(t){return We(t)&&lt.call(t,"callee")&&!dt.call(t,"callee")},Te=Array.isArray;function Me(t){return null!=t&&Ne(t.length)&&!Ce(t)}var De=mt||Je;function Re(t,e){return ve(t,e)}function Ce(t){if(!Ve(t))return!1;var e=he(t);return e==_||e==h||e==c||e==g}function Ne(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Ve(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function We(t){return null!=t&&"object"==typeof t}var Ge=K?tt(K):de;function qe(t){return Me(t)?fe(t):ge(t)}function He(){return[]}function Je(){return!1}module.exports=Re;
},{}],"ltEX":[function(require,module,exports) {
module.exports=function(n,t){return n.length===t.length&&JSON.stringify(n.map(function(n){return n}).sort())===JSON.stringify(t.map(function(n){return n}).sort())};
},{}],"f88W":[function(require,module,exports) {

},{}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"UUq2":[function(require,module,exports) {
var process = require("process");
var r=require("process");function t(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(r){return e.exec(r).slice(1)};function s(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var e="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var i=o>=0?arguments[o]:r.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,n="/"===i.charAt(0))}return(n?"/":"")+(e=t(s(e.split("/"),function(r){return!!r}),!n).join("/"))||"."},exports.normalize=function(r){var e=exports.isAbsolute(r),n="/"===o(r,-1);return(r=t(s(r.split("/"),function(r){return!!r}),!e).join("/"))||e||(r="."),r&&n&&(r+="/"),(e?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(s(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),s=e(t.split("/")),o=Math.min(n.length,s.length),i=o,u=0;u<o;u++)if(n[u]!==s[u]){i=u;break}var l=[];for(u=i;u<n.length;u++)l.push("..");return(l=l.concat(s.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=n(r),e=t[0],s=t[1];return e||s?(s&&(s=s.substr(0,s.length-1)),e+s):"."},exports.basename=function(r,t){var e=n(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return n(r)[3]};var o="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};
},{"process":"pBGv"}],"8q6f":[function(require,module,exports) {
var process = require("process");
var t=require("process"),e=function(){var t=function(t,e,i,n){for(i=i||{},n=t.length;n--;i[t[n]]=e);return i},e=[1,12],i=[1,13],n=[1,9],s=[1,10],r=[1,11],h=[1,14],o=[1,15],l=[14,18,22,24],a=[18,22],c=[22,24],u={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,i,n,s,r,h){var o=r.length-1;switch(s){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=r[o-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=r[o-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[r[o-2],r[o]];break;case 16:this.$={},this.$[r[o][0]]=r[o][1];break;case 17:this.$=r[o-2],void 0!==r[o-2][r[o][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(r[o][0])),r[o-2][r[o][0]]=r[o][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[r[o]];break;case 21:this.$=r[o-2],r[o-2].push(r[o])}},table:[{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:s,11:r,12:1,13:2,15:7,16:8,17:h,23:o},{1:[3]},{14:[1,16]},t(l,[2,7]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,3]),t(l,[2,4]),t(l,[2,5]),t([14,18,21,22,24],[2,1]),t(l,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:s,11:r,13:23,15:7,16:8,17:h,23:o,24:[1,21],25:22},{1:[2,6]},t(l,[2,13]),{18:[1,24],22:[1,25]},t(a,[2,16]),{21:[1,26]},t(l,[2,18]),{22:[1,28],24:[1,27]},t(c,[2,20]),t(l,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:s,11:r,13:30,15:7,16:8,17:h,23:o},t(l,[2,19]),{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:s,11:r,13:31,15:7,16:8,17:h,23:o},t(a,[2,17]),t(a,[2,15]),t(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable){function i(t,e){this.message=t,this.hash=e}throw i.prototype=Error,new i(t,e)}this.trace(t)},parse:function(t){var e=this,i=[0],n=[null],s=[],r=this.table,h="",o=0,l=0,a=0,c=s.slice.call(arguments,1),u=Object.create(this.lexer),y={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(y.yy[p]=this.yy[p]);u.setInput(t,y.yy),y.yy.lexer=u,y.yy.parser=this,void 0===u.yylloc&&(u.yylloc={});var f=u.yylloc;s.push(f);var _=u.options&&u.options.ranges;"function"==typeof y.yy.parseError?this.parseError=y.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,m,d,b,k,x,S,v,$,E=function(){var t;return"number"!=typeof(t=u.lex()||1)&&(t=e.symbols_[t]||t),t},O={};;){if(d=i[i.length-1],this.defaultActions[d]?b=this.defaultActions[d]:(null==g&&(g=E()),b=r[d]&&r[d][g]),void 0===b||!b.length||!b[0]){var N="";for(x in $=[],r[d])this.terminals_[x]&&x>2&&$.push("'"+this.terminals_[x]+"'");N=u.showPosition?"Parse error on line "+(o+1)+":\n"+u.showPosition()+"\nExpecting "+$.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(N,{text:u.match,token:this.terminals_[g]||g,line:u.yylineno,loc:f,expected:$})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+g);switch(b[0]){case 1:i.push(g),n.push(u.yytext),s.push(u.yylloc),i.push(b[1]),g=null,m?(g=m,m=null):(l=u.yyleng,h=u.yytext,o=u.yylineno,f=u.yylloc,a>0&&a--);break;case 2:if(S=this.productions_[b[1]][1],O.$=n[n.length-S],O._$={first_line:s[s.length-(S||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(S||1)].first_column,last_column:s[s.length-1].last_column},_&&(O._$.range=[s[s.length-(S||1)].range[0],s[s.length-1].range[1]]),void 0!==(k=this.performAction.apply(O,[h,l,o,y.yy,b[1],n,s].concat(c))))return k;S&&(i=i.slice(0,-1*S*2),n=n.slice(0,-1*S),s=s.slice(0,-1*S)),i.push(this.productions_[b[1]][0]),n.push(O.$),s.push(O._$),v=r[i[i.length-2]][i[i.length-1]],i.push(v);break;case 3:return!0}}return!0}},y={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,n,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var r in s)this[r]=s[r];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,i,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length;r++)if((i=this._input.match(this.rules[s[r]]))&&(!e||i[0].length>e[0].length)){if(e=i,n=r,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,s[r])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,s[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,n){switch(i){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function p(){this.yy={}}return u.lexer=y,p.prototype=u,u.Parser=p,new p}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=e,exports.Parser=e.Parser,exports.parse=function(){return e.parse.apply(e,arguments)},exports.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),t.exit(1));var i=require("fs").readFileSync(require("path").normalize(e[1]),"utf8");return exports.parser.parse(i)},"undefined"!=typeof module&&require.main===module&&exports.main(t.argv.slice(1)));
},{"fs":"f88W","path":"UUq2","process":"pBGv"}],"BDvf":[function(require,module,exports) {
function n(n){return n*Math.PI/180}function e(e){var t=0;if(e.length>2)for(var o,r,i=0;i<e.length-1;i++)o=e[i],t+=n((r=e[i+1])[0]-o[0])*(2+Math.sin(n(o[1]))+Math.sin(n(r[1])));return t>=0}function t(n){if(n&&n.length>0){if(e(n[0]))return!1;if(!n.slice(1,n.length).every(e))return!1}return!0}function o(n){return"Polygon"===n.type?t(n.coordinates):"MultiPolygon"===n.type?n.coordinates.every(t):void 0}module.exports=function(n,e){o(n)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:n.__line__})};
},{}],"mn9s":[function(require,module,exports) {
var e=require("./rhr");function n(n,t){var i=[],o=0,r=10,s=6;function a(e){if(t&&!1===t.noDuplicateMembers||!e.__duplicateProperties__||i.push({message:"An object contained duplicate members, making parsing ambigous: "+e.__duplicateProperties__.join(", "),line:e.__line__}),!u(e,"type","string"))if(g[e.type])e&&g[e.type](e);else{var n=p[e.type.toLowerCase()];void 0!==n?i.push({message:"Expected "+n+" but got "+e.type+" (case sensitive)",line:e.__line__}):i.push({message:"The type "+e.type+" is unknown",line:e.__line__})}}function l(e,n){return e.every(function(e){return null!==e&&typeof e===n})}function u(e,n,t){if(void 0===e[n])return i.push({message:'"'+n+'" member required',line:e.__line__});if("array"===t){if(!Array.isArray(e[n]))return i.push({message:'"'+n+'" member should be an array, but is an '+typeof e[n]+" instead",line:e.__line__})}else{if("object"===t&&e[n]&&"Object"!==e[n].constructor.name)return i.push({message:'"'+n+'" member should be '+t+", but is an "+e[n].constructor.name+" instead",line:e.__line__});if(t&&typeof e[n]!==t)return i.push({message:'"'+n+'" member should be '+t+", but is an "+typeof e[n]+" instead",line:e.__line__})}}function m(e,n){if(!Array.isArray(e))return i.push({message:"position should be an array, is a "+typeof e+" instead",line:e.__line__||n});if(e.length<2)return i.push({message:"position must have 2 or more elements",line:e.__line__||n});if(e.length>3)return i.push({message:"position should not have more than 3 elements",level:"message",line:e.__line__||n});if(!l(e,"number"))return i.push({message:"each element in a position must be a number",line:e.__line__||n});if(t&&t.precisionWarning){if(o===r)return o+=1,i.push({message:"truncated warnings: we've encountered coordinate precision warning "+r+" times, no more warnings will be reported",level:"message",line:e.__line__||n});o<r&&e.forEach(function(t){var r=0,a=String(t).split(".")[1];if(void 0!==a&&(r=a.length),r>s)return o+=1,i.push({message:"precision of coordinates should be reduced",level:"message",line:e.__line__||n})})}}function _(e,n,t,o){if(void 0===o&&void 0!==e.__line__&&(o=e.__line__),0===t)return m(e,o);if(1===t&&n)if("LinearRing"===n){if(!Array.isArray(e[e.length-1]))return i.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:o}),!0;if(e.length<4&&i.push({message:"a LinearRing of coordinates needs to have four or more positions",line:o}),e.length&&(e[e.length-1].length!==e[0].length||!e[e.length-1].every(function(n,t){return e[0][t]===n})))return i.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:o}),!0}else if("Line"===n&&e.length<2)return i.push({message:"a line needs to have two or more coordinates to be valid",line:o});if(Array.isArray(e))return e.map(function(e){return _(e,n,t-1,e.__line__||o)}).some(function(e){return e});i.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:o})}function c(e){if(e.crs){"object"==typeof e.crs&&e.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===e.crs.properties.name?i.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:e.__line__}):i.push({message:"old-style crs member is not recommended",line:e.__line__})}}function d(e){if(e.bbox)return Array.isArray(e.bbox)?(l(e.bbox,"number")||i.push({message:"each element in a bbox member must be a number",line:e.bbox.__line__}),4!==e.bbox.length&&6!==e.bbox.length&&i.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:e.bbox.__line__}),i.length):void i.push({message:"bbox member must be an array of numbers, but is a "+typeof e.bbox,line:e.__line__})}function b(e){c(e),d(e),void 0!==e.id&&"string"!=typeof e.id&&"number"!=typeof e.id&&i.push({message:'Feature "id" member must have a string or number value',line:e.__line__}),void 0!==e.features&&i.push({message:'Feature object cannot contain a "features" member',line:e.__line__}),void 0!==e.coordinates&&i.push({message:'Feature object cannot contain a "coordinates" member',line:e.__line__}),"Feature"!==e.type&&i.push({message:"GeoJSON features must have a type=feature member",line:e.__line__}),u(e,"properties","object"),u(e,"geometry","object")||e.geometry&&a(e.geometry)}var g={Point:function(e){var n;c(e),d(e),void 0!==(n=e).properties&&i.push({message:'geometry object cannot contain a "properties" member',line:n.__line__}),void 0!==n.geometry&&i.push({message:'geometry object cannot contain a "geometry" member',line:n.__line__}),void 0!==n.features&&i.push({message:'geometry object cannot contain a "features" member',line:n.__line__}),u(e,"coordinates","array")||m(e.coordinates)},Feature:b,MultiPoint:function(e){c(e),d(e),u(e,"coordinates","array")||_(e.coordinates,"",1)},LineString:function(e){c(e),d(e),u(e,"coordinates","array")||_(e.coordinates,"Line",1)},MultiLineString:function(e){c(e),d(e),u(e,"coordinates","array")||_(e.coordinates,"Line",2)},FeatureCollection:function(e){if(c(e),d(e),void 0!==e.properties&&i.push({message:'FeatureCollection object cannot contain a "properties" member',line:e.__line__}),void 0!==e.coordinates&&i.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:e.__line__}),!u(e,"features","array")){if(!l(e.features,"object"))return i.push({message:"Every feature must be an object",line:e.__line__});e.features.forEach(b)}},GeometryCollection:function(e){c(e),d(e),u(e,"geometries","array")||(l(e.geometries,"object")||i.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:e.__line__}),1===e.geometries.length&&i.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:e.geometries.__line__}),e.geometries.forEach(function(n){n&&("GeometryCollection"===n.type&&i.push({message:"GeometryCollection should avoid nested geometry collections",line:e.geometries.__line__}),a(n))}))},Polygon:function(n){c(n),d(n),u(n,"coordinates","array")||_(n.coordinates,"LinearRing",2)||e(n,i)},MultiPolygon:function(n){c(n),d(n),u(n,"coordinates","array")||_(n.coordinates,"LinearRing",3)||e(n,i)}},p=Object.keys(g).reduce(function(e,n){return e[n.toLowerCase()]=n,e},{});return"object"!=typeof n||null==n?(i.push({message:"The root of a GeoJSON object must be an object.",line:0}),i):(a(n),i.forEach(function(e){({}).hasOwnProperty.call(e,"line")&&void 0===e.line&&delete e.line}),i)}module.exports.hint=n;
},{"./rhr":"BDvf"}],"WrXL":[function(require,module,exports) {
var e=require("jsonlint-lines"),r=require("./object");function t(t,n){var s,i=[];if("object"==typeof t)s=t;else{if("string"!=typeof t)return[{message:"Expected string or object as input",line:0}];try{s=e.parse(t)}catch(e){var a=e.message.match(/line (\d+)/);return[{line:parseInt(a[1],10)-1,message:e.message,error:e}]}}return i=i.concat(r.hint(s,n))}module.exports.hint=t;
},{"jsonlint-lines":"8q6f","./object":"mn9s"}],"Ks8d":[function(require,module,exports) {
var e=require("lodash.isequal"),t=require("@mapbox/geojson-normalize"),r=require("hat"),n=require("./lib/features_at"),o=require("./lib/string_sets_are_equal"),s=require("@mapbox/geojsonhint"),i=require("./constants"),u=require("./lib/string_set"),d={Polygon:require("./feature_types/polygon"),LineString:require("./feature_types/line_string"),Point:require("./feature_types/point"),MultiPolygon:require("./feature_types/multi_feature"),MultiLineString:require("./feature_types/multi_feature"),MultiPoint:require("./feature_types/multi_feature")};module.exports=function(a,l){return l.modes=i.modes,l.getFeatureIdsAt=function(e){return n.click({point:e},null,a).map(function(e){return e.properties.id})},l.getSelectedIds=function(){return a.store.getSelectedIds()},l.getSelected=function(){return{type:i.geojsonTypes.FEATURE_COLLECTION,features:a.store.getSelectedIds().map(function(e){return a.store.get(e)}).map(function(e){return e.toGeoJSON()})}},l.getSelectedPoints=function(){return{type:i.geojsonTypes.FEATURE_COLLECTION,features:a.store.getSelectedCoordinates().map(function(e){return{type:i.geojsonTypes.FEATURE,properties:{},geometry:{type:i.geojsonTypes.POINT,coordinates:e.coordinates}}})}},l.set=function(e){if(void 0===e.type||e.type!==i.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(e.features))throw new Error("Invalid FeatureCollection");var t=a.store.createRenderBatch(),r=a.store.getAllIds().slice(),n=l.add(e),o=new u(n);return(r=r.filter(function(e){return!o.has(e)})).length&&l.delete(r),t(),n},l.add=function(n){var o=s.hint(n,{precisionWarning:!1}).filter(function(e){return"message"!==e.level});if(o.length)throw new Error(o[0].message);var i=JSON.parse(JSON.stringify(t(n))).features.map(function(t){if(t.id=t.id||r(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===a.store.get(t.id)||a.store.get(t.id).type!==t.geometry.type){var n=d[t.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: "+t.geometry.type+".");var o=new n(a,t);a.store.add(o)}else{var s=a.store.get(t.id);s.properties=t.properties,e(s.getCoordinates(),t.geometry.coordinates)||s.incomingCoords(t.geometry.coordinates)}return t.id});return a.store.render(),i},l.get=function(e){var t=a.store.get(e);if(t)return t.toGeoJSON()},l.getAll=function(){return{type:i.geojsonTypes.FEATURE_COLLECTION,features:a.store.getAll().map(function(e){return e.toGeoJSON()})}},l.delete=function(e){return a.store.delete(e,{silent:!0}),l.getMode()!==i.modes.DIRECT_SELECT||a.store.getSelectedIds().length?a.store.render():a.events.changeMode(i.modes.SIMPLE_SELECT,void 0,{silent:!0}),l},l.deleteAll=function(){return a.store.delete(a.store.getAllIds(),{silent:!0}),l.getMode()===i.modes.DIRECT_SELECT?a.events.changeMode(i.modes.SIMPLE_SELECT,void 0,{silent:!0}):a.store.render(),l},l.changeMode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e===i.modes.SIMPLE_SELECT&&l.getMode()===i.modes.SIMPLE_SELECT?o(t.featureIds||[],a.store.getSelectedIds())?l:(a.store.setSelected(t.featureIds,{silent:!0}),a.store.render(),l):e===i.modes.DIRECT_SELECT&&l.getMode()===i.modes.DIRECT_SELECT&&t.featureId===a.store.getSelectedIds()[0]?l:(a.events.changeMode(e,t,{silent:!0}),l)},l.getMode=function(){return a.events.getMode()},l.trash=function(){return a.events.trash({silent:!0}),l},l.combineFeatures=function(){return a.events.combineFeatures({silent:!0}),l},l.uncombineFeatures=function(){return a.events.uncombineFeatures({silent:!0}),l},l.setFeatureProperty=function(e,t,r){return a.store.setFeatureProperty(e,t,r),l},l};
},{"lodash.isequal":"/a1X","@mapbox/geojson-normalize":"NUQQ","hat":"RLN0","./lib/features_at":"yhG3","./lib/string_sets_are_equal":"ltEX","@mapbox/geojsonhint":"WrXL","./constants":"CUIt","./lib/string_set":"Y+E8","./feature_types/polygon":"CqQB","./feature_types/line_string":"ZGhc","./feature_types/point":"xHxC","./feature_types/multi_feature":"XckI"}],"kynI":[function(require,module,exports) {
var e=require("./src/setup"),r=require("./src/options"),o=require("./src/api"),s=require("./src/constants"),n=function(n,t){var i={options:n=r(n)};t=o(i,t),i.api=t;var u=e(i);return t.onAdd=u.onAdd,t.onRemove=u.onRemove,t.types=s.types,t.options=n,t};module.exports=function(e){n(e,this)},module.exports.modes=require("./src/modes");
},{"./src/setup":"Rc0E","./src/options":"2pB9","./src/api":"Ks8d","./src/constants":"CUIt","./src/modes":"oyz7"}],"gMeU":[function(require,module,exports) {
!function(t){"use strict";var o,e=t.Uint8Array,n=t.HTMLCanvasElement,s=n&&n.prototype,i=/\s*;\s*base64\s*(?:;|$)/i,a="toDataURL";e&&(o=new e([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),!n||s.toBlob&&s.toBlobHD||(s.toBlob||(s.toBlob=function(t,n){if(n||(n="image/png"),this.mozGetAsFile)t(this.mozGetAsFile("canvas",n));else if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(n))t(this.msToBlob());else{var s,l=Array.prototype.slice.call(arguments,1),b=this[a].apply(this,l),r=b.indexOf(","),f=b.substring(r+1),B=i.test(b.substring(0,r));Blob.fake?((s=new Blob).encoding=B?"base64":"URI",s.data=f,s.size=f.length):e&&(s=B?new Blob([function(t){for(var n,s,i=t.length,a=new e(i/4*3|0),l=0,b=0,r=[0,0],f=0,B=0;i--;)s=t.charCodeAt(l++),255!==(n=o[s-43])&&void 0!==n&&(r[1]=r[0],r[0]=s,B=B<<6|n,4==++f&&(a[b++]=B>>>16,61!==r[1]&&(a[b++]=B>>>8),61!==r[0]&&(a[b++]=B),f=0));return a}(f)],{type:n}):new Blob([decodeURIComponent(f)],{type:n})),t(s)}}),!s.toBlobHD&&s.toDataURLHD?s.toBlobHD=function(){a="toDataURLHD";var t=this.toBlob();return a="toDataURL",t}:s.toBlobHD=s.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);
},{}],"qmkL":[function(require,module,exports) {
var define;
var e,t=t||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,a=/constructor/i.test(e.HTMLElement)||e.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},d=function(e){setTimeout(function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()},4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},f=function(t,f,s){s||(t=c(t));var l,p=this,v="application/octet-stream"===t.type,w=function(){!function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){u(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return l=n().createObjectURL(t),void setTimeout(function(){var e,t;o.href=l,o.download=f,e=o,t=new MouseEvent("click"),e.dispatchEvent(t),w(),d(l),p.readyState=p.DONE});!function(){if((i||v&&a)&&e.FileReader){var o=new FileReader;return o.onloadend=function(){var t=i?o.result:o.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,w()},o.readAsDataURL(t),void(p.readyState=p.INIT)}l||(l=n().createObjectURL(t)),v?e.location.href=l:e.open(l,"_blank")||(e.location.href=l);p.readyState=p.DONE,w(),d(l)}()},s=f.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(s.abort=function(){},s.readyState=s.INIT=0,s.WRITING=1,s.DONE=2,s.error=s.onwritestart=s.onprogress=s.onwrite=s.onabort=s.onerror=s.onwriteend=null,function(e,t,n){return new f(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=t:null!=e&&null!==e.amd&&e("FileSaver.js",function(){return t});
},{}],"V8v6":[function(require,module,exports) {
exports.loading='\n  <svg style="width: 100%; height: 100%;" width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg" stroke="#fff">\n    <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2">\n      <circle cx="22" cy="22" r="6" stroke-opacity="0">\n        <animate attributeName="r"\n              begin="1.5s" dur="3s"\n              values="6;22"\n              calcMode="linear"\n              repeatCount="indefinite" />\n        <animate attributeName="stroke-opacity"\n              begin="1.5s" dur="3s"\n              values="1;0" calcMode="linear"\n              repeatCount="indefinite" />\n        <animate attributeName="stroke-width"\n              begin="1.5s" dur="3s"\n              values="2;0" calcMode="linear"\n              repeatCount="indefinite" />\n      </circle>\n      <circle cx="22" cy="22" r="6" stroke-opacity="0">\n        <animate attributeName="r"\n              begin="3s" dur="3s"\n              values="6;22"\n              calcMode="linear"\n              repeatCount="indefinite" />\n        <animate attributeName="stroke-opacity"\n              begin="3s" dur="3s"\n              values="1;0" calcMode="linear"\n              repeatCount="indefinite" />\n        <animate attributeName="stroke-width"\n              begin="3s" dur="3s"\n              values="2;0" calcMode="linear"\n              repeatCount="indefinite" />\n      </circle>\n      <circle cx="22" cy="22" r="8">\n        <animate attributeName="r"\n              begin="0s" dur="1.5s"\n              values="6;1;2;3;4;5;6"\n              calcMode="linear"\n              repeatCount="indefinite" />\n      </circle>\n    </g>\n  </svg>\n  ',exports.download='\n  <svg height="19px" viewBox="0 0 14 19" width="14px" xmlns="http://www.w3.org/2000/svg">\n    <title/><desc/><defs/>\n    <g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1">\n      <g fill="#000000" id="Core" transform="translate(-383.000000, -213.000000)">\n        <g id="file-download" transform="translate(383.000000, 213.500000)">\n          <path d="M14,6 L10,6 L10,0 L4,0 L4,6 L0,6 L7,13 L14,6 L14,6 Z M0,15 L0,17 L14,17 L14,15 L0,15 L0,15 Z" id="Shape"/>\n        </g>\n      </g>\n    </g>\n  </svg>\n  ';
},{}],"ffN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}();require("canvas-toBlob");var e=require("file-saver"),o=r(e),n=require("./icons"),i=r(n);function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t){a(this,e),this.options=Object.assign({dpi:300,attribution:"© OpenStreetMap Contributors",textFont:[]},t)}return t(e,[{key:"onAdd",value:function(t){var e=this;this.container=document.createElement("div"),this.container.className="mapboxgl-ctrl mapboxgl-ctrl-group";var n=document.createElement("button");return n.className="mapboxgl-ctrl-icon mapbox-gl-download",n.type="button",n.setAttribute("aria-label","Download"),n.innerHTML=i.default.download,this.container.appendChild(n),n.addEventListener("click",function(){var n=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get:function(){return e.options.dpi/96}});var i=e.loading(),r=document.createElement("div");document.body.appendChild(r);var a=t.getContainer().offsetWidth,l=t.getContainer().offsetHeight,d=t.unproject([a,l]).toArray();e.setStyles(r,{visibility:"hidden",position:"absolute",top:0,bottom:0,width:a+"px",height:l+"px"});var u=new mapboxgl.Map({container:r,center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),style:t.getStyle(),hash:!1,preserveDrawingBuffer:!0,interactive:!1,attributionControl:!1});u.once("load",function(){var a={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:d},properties:{text:e.options.attribution}}]};u.addSource("attribution-for-image",{type:"geojson",data:a});var l=[];if(e.options.textFont.length)l=e.options.textFont;else for(var c=t.getStyle().layers,s=0;s<c.length;s++)try{var p=t.getLayoutProperty(c[s].id,"text-font");if(p&&p.length){l=p;break}}catch(t){}u.addLayer({id:"markers",type:"symbol",source:"attribution-for-image",paint:{"text-color":"#000000","text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":2},layout:{"text-field":"{text}","text-font":l,"text-size":18,"text-anchor":"bottom-right","text-max-width":28,"text-offset":[-.5,-.5],"text-allow-overlap":!0}}),setTimeout(function(){u.getCanvas().toBlob(function(t){o.default.saveAs(t,u.getCenter().toArray().join("-")+".png"),u.remove(),r.parentNode.removeChild(r),i.parentNode.removeChild(i),Object.defineProperty(window,"devicePixelRatio",{get:function(){return n}})})},3e3)})}),this.container}},{key:"onRemove",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"loading",value:function(){var t=document.createElement("div");document.body.appendChild(t),this.setStyles(t,{position:"absolute",top:0,bottom:0,width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:9999});var e=document.createElement("div");return e.innerHTML=i.default.loading,this.setStyles(e,{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999,margin:"auto",width:"120px",height:"120px"}),t.appendChild(e),t}},{key:"setStyles",value:function(t,e){for(var o in e)t.style[o]=e[o]}}]),e}();exports.default=l;
},{"canvas-toBlob":"gMeU","file-saver":"qmkL","./icons":"V8v6"}],"A2T1":[function(require,module,exports) {
"use strict";var o=require("@tilecloud/mbgl-tilecloud-control"),t=i(o),e=require("@tilecloud/mbgl-fork-me-control"),l=i(e),n=require("@mapbox/mapbox-gl-draw"),r=i(n),a=require("../src/app"),d=i(a);function i(o){return o&&o.__esModule?o:{default:o}}require("../node_modules/@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css");var u=new mapboxgl.Map({container:"map",style:"https://tilecloud.github.io/tiny-tileserver/style.json",attributionControl:!0,hash:!0});u.addControl(new mapboxgl.NavigationControl),u.addControl(new mapboxgl.GeolocateControl),u.addControl(new t.default),u.addControl(new l.default({url:"https://github.com/tilecloud/mbgl-export-control"})),u.on("load",function(){u.addControl(new r.default({controls:{point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!1,uncombine_features:!1}})),u.addControl(new d.default({dpi:300,textFont:["noto-sans-cjk-jp-demi-light"]}))});
},{"@tilecloud/mbgl-tilecloud-control":"mg8D","@tilecloud/mbgl-fork-me-control":"7bbP","@mapbox/mapbox-gl-draw":"kynI","../src/app":"ffN9","../node_modules/@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css":"f88W"}]},{},["A2T1"], null)
//# sourceMappingURL=app.28b95271.map